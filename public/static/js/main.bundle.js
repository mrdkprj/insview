(()=>{"use strict";var e,t,n,r={1251:(e,t,n)=>{var r=n(5944),s=n(7294),i=n(3935),a=n(917);const o=(0,a.iv)({transition:"box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",boxShadow:"rgb(0 0 0 / 20%) 0px 2px 4px -1px, rgb(0 0 0 / 14%) 0px 4px 5px 0px, rgb(0 0 0 / 12%) 0px 1px 10px 0px",display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:"0",zIndex:"1100",top:"0px",left:"auto",right:"0px",backgroundColor:"rgb(25, 118, 210)",color:"rgb(255, 255, 255)",position:"relative"}),l=e=>{var t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(e,[]);return(0,r.tZ)("header",Object.assign({css:o,style:t.style},{children:t.children}))},c=(0,a.iv)({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",backgroundColor:"transparent",outline:"0px",border:"0px",margin:"0px",cursor:"pointer",userSelect:"none",verticalAlign:"middle",appearance:"none",textDecoration:"none",textAlign:"center",flex:"0 0 auto",borderRadius:"50%",overflow:"visible",color:"rgba(0, 0, 0, 0.54)",transition:"background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",WebkitTapHighlightColor:"transparent",fontSize:"1.125rem"}),u=(0,a.iv)({padding:"5px"}),d=(0,a.iv)({padding:"8px"}),p=(0,a.iv)({margin:"0px 0px 0px -12px"}),g=(0,a.iv)({margin:"0px -3px 0px 0px"}),h=e=>{const t=[c];return e.css&&t.push(e.css),"small"===e.size&&t.push(u),"medium"===e.size&&t.push(d),"start"===e.edge&&t.push(p),"end"===e.edge&&t.push(g),(0,r.tZ)("button",Object.assign({css:t,style:e.style,onClick:t=>e.onClick?e.onClick(t):t},{children:e.children}))};const f=(0,a.iv)({margin:"0px",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"400",fontSize:"1rem",lineHeight:"1.75",letterSpacing:"0.00938em"}),b=(0,a.iv)({margin:"0px",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"500",fontSize:"1.25rem",lineHeight:"1.6",letterSpacing:"0.0075em"}),m=e=>{var t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(e,[]);const n="subtitle1"===t.variant?f:b;return(0,r.tZ)("div",Object.assign({css:n,style:t.style},{children:t.children}))};const y=(0,a.iv)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",inset:"0px",backgroundColor:"rgba(0, 0, 0, 0.5)"}),v=e=>{var t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(e,[]);const[n,i]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{i(t.open)}),[t.open]),n?(0,r.tZ)("div",Object.assign({css:y,style:t.style},{children:t.children})):null};var x=n(2141),w=n(594);const O=(0,a.iv)({position:"fixed",display:"flex",left:"8px",right:"8px",justifyContent:"center",alignItems:"center",top:"8px","@media(min-width: 600px)":{top:"24px",left:"50%",right:"auto",transform:"translateX(-50%)"}}),j=(0,a.iv)({transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",opacity:0,borderRadius:"4px",boxShadow:"rgb(0 0 0 / 20%) 0px 3px 5px -1px, rgb(0 0 0 / 14%) 0px 6px 10px 0px, rgb(0 0 0 / 12%) 0px 1px 18px 0px",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"500",fontSize:"0.875rem",lineHeight:"1.43",letterSpacing:"0.01071em",backgroundColor:"rgb(211, 47, 47)",display:"flex",padding:"6px 16px",color:"rgb(255, 255, 255)"}),C=(0,a.iv)({marginRight:"12px",padding:"7px 0px",display:"flex",fontSize:"22px",opacity:"0.9"}),k=(0,a.iv)({padding:"8px 0px"}),S=(0,a.iv)({display:"flex",alignItems:"flex-start",padding:"4px 0px 0px 16px",marginLeft:"auto",marginRight:"-8px"}),Z=e=>{const t=(0,s.useRef)(0),n=(0,s.useRef)(0),i=(0,s.useRef)(0),a=(0,s.createRef)(),[o,l]=(0,s.useState)(e.open),c=(0,s.useCallback)((()=>{clearTimeout(n.current),clearTimeout(i.current),i.current=window.setTimeout((()=>{a.current&&(a.current.style.opacity="",a.current.style.transform="scale(0)")}),200)}),[a]),u=(0,s.useCallback)((()=>{clearTimeout(t.current),t.current=window.setTimeout((()=>{a.current&&(a.current.style.opacity="1",a.current.style.transform="none")}),250)}),[a]),d=(0,s.useCallback)((()=>{clearTimeout(n.current),n.current=window.setTimeout((()=>{c()}),e.autoHideDuration)}),[c,e.autoHideDuration]);return(0,s.useEffect)((()=>{l(e.open)}),[e.open]),(0,s.useEffect)((()=>{console.log("ef"),o&&(u(),d())}),[o,u,d]),(0,s.useEffect)((()=>()=>c()),[c]),o?(0,r.tZ)("div",Object.assign({css:O,style:e.style},{children:(0,r.BX)("div",Object.assign({css:j,style:e.childStyle,ref:a},{children:[(0,r.tZ)("div",Object.assign({css:C},{children:(0,r.tZ)(x.Z,{fontSize:"inherit",color:"inherit"})})),(0,r.tZ)("div",Object.assign({css:k},{children:e.children})),(0,r.tZ)("div",Object.assign({css:S},{children:(0,r.tZ)(h,Object.assign({size:"small",onClick:e.onClose,style:{color:"inherit"}},{children:(0,r.tZ)(w.Z,{fontSize:"small",color:"inherit"})}))}))]}))})):null},I=(0,a.F4)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),T=(0,a.iv)({display:"inline-block",width:"40px",height:"40px",animation:`1.4s linear 0s infinite normal none running ${I}`}),R=(0,a.F4)({"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:0},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}}),z=(0,a.iv)({stroke:"currentcolor",strokeDasharray:"80px, 200px",strokeDashoffset:"0",animation:`1.4s ease-in-out 0s infinite normal none running ${R}`}),L=()=>(0,r.tZ)("span",Object.assign({css:T},{children:(0,r.tZ)("svg",Object.assign({viewBox:"22 22 44 44"},{children:(0,r.tZ)("circle",{css:z,cx:"44",cy:"44",r:"20.2",fill:"none",strokeWidth:"3.6"})}))})),E=(0,a.iv)({position:"fixed",inset:0}),P=(0,a.iv)({display:"flex",alignItems:"center",justifyContent:"center",outline:"0px",height:"100%",opacity:0,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"}),X=(0,a.iv)({backgroundColor:"rgb(255, 255, 255)",color:"rgba(0, 0, 0, 0.87)",transition:"box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",boxShadow:"rgb(0 0 0 / 20%) 0px 11px 15px -7px, rgb(0 0 0 / 14%) 0px 24px 38px 3px, rgb(0 0 0 / 12%) 0px 9px 46px 8px",margin:"0px",position:"relative",overflowY:"auto",display:"flex",flexDirection:"column",maxHeight:"none",maxWidth:"100%",width:"100%",height:"100%",borderRadius:"0px"}),M=e=>{const t=(0,s.useRef)(0),n=(0,s.useRef)(null),[i,a]=(0,s.useState)(e.open),o=(0,s.useCallback)((()=>{n.current&&(n.current.style.opacity="1")}),[]),l=(0,s.useCallback)((()=>{n.current&&(n.current.style.opacity="0.8",clearTimeout(t.current),t.current=window.setTimeout((()=>{n.current&&(n.current.style.opacity="0")}),200))}),[]);return(0,s.useEffect)((()=>{a(e.open)}),[e.open]),(0,s.useEffect)((()=>{i&&o()}),[i,o]),(0,s.useEffect)((()=>()=>l()),[l]),i?(0,r.tZ)("div",Object.assign({css:E,style:e.style},{children:(0,r.tZ)("div",Object.assign({css:P,ref:n},{children:(0,r.tZ)("div",Object.assign({css:X},{children:e.children}))}))})):null};const B=(0,a.iv)({listStyle:"none",margin:0,padding:"8px 0px",position:"relative"}),D=e=>{var t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(e,[]);return(0,r.tZ)("ul",Object.assign({css:B},{children:t.children}))};const F=(0,a.iv)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",padding:"8px 16px",borderBottom:"1px solid rgba(0, 0, 0, 0.12)",backgroundClip:"padding-box",fontSize:"14px"}),A=e=>{var t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(e,[]);return(0,r.tZ)("li",Object.assign({css:F,onClick:t.onClick},{children:t.children}))};const H=(0,a.iv)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:"0",width:"40px",height:"40px",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontSize:"1.25rem",lineHeight:"1",borderRadius:"50%",overflow:"hidden",userSelect:"none"}),U=(0,a.iv)({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:"10000px"}),W=(0,a.iv)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:"0",width:"40px",height:"40px",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontSize:"1.25rem",lineHeight:"1",borderRadius:"50%",overflow:"hidden",userSelect:"none",color:"rgb(255, 255, 255)",backgroundColor:"rgb(189, 189, 189)"}),q=e=>{var t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(e,[]);const[n,i]=(0,s.useState)(!0);return(0,r.tZ)("div",Object.assign({css:H,style:t.style},{children:n?(0,r.tZ)("img",{css:U,src:t.src,alt:t.alt,onError:()=>{i(!1)}}):(0,r.tZ)("div",Object.assign({css:W},{children:(a=t.alt,a?a.charAt(0):"h")}))}));var a},Y=(0,s.forwardRef)(((e,t)=>(0,r.tZ)("div",Object.assign({css:N,style:e.style,ref:t},{children:e.children})))),N=(0,a.iv)({flex:"1 1 auto",overflowY:"auto",padding:"20px 24px"}),_=Y;const $=(0,a.iv)({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",backgroundColor:"transparent",outline:"0px",border:"0px",margin:"0px",cursor:"pointer",userSelect:"none",verticalAlign:"middle",appearance:"none",textDecoration:"none",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"500",fontSize:"0.875rem",lineHeight:"1.75",letterSpacing:"0.02857em",textTransform:"uppercase",minWidth:"64px",padding:"6px 8px",borderRadius:"4px",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",color:"rgb(25, 118, 210)"}),V=e=>{var t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(e,[]);return(0,r.tZ)("button",Object.assign({type:"button",onClick:t.onClick,css:$},{children:t.children}))},G=(0,a.iv)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:"0px",padding:"0px",margin:"8px 0px 4px",border:"0px",verticalAlign:"top",width:"100%"}),J=(0,a.iv)({color:"rgba(0, 0, 0, 0.6)",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"400",fontSize:"1rem",lineHeight:"1.4375em",letterSpacing:"0.00938em",padding:"0px",display:"block",transformOrigin:"left top",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"133%",position:"absolute",left:"0px",top:"0px",transform:"translate(0px, -1.5px) scale(0.75)",transition:"color 200ms cubic-bezier(0, 0, 0.2, 1) 0ms, transform 200ms cubic-bezier(0, 0, 0.2, 1) 0ms, max-width 200ms cubic-bezier(0, 0, 0.2, 1) 0ms",".empty &":{maxWidth:"100%",transform:"translate(0px, 20px) scale(1)"},".has-focus &":{color:"rgba(25,118,210)"},".has-error &":{color:"rgb(211, 47, 47)"}}),K=(0,a.iv)({fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"400",fontSize:"1rem",lineHeight:"1.4375em",letterSpacing:"0.00938em",color:"rgba(0, 0, 0, 0.87)",boxSizing:"border-box",cursor:"text",display:"inline-flex",alignItems:"center",width:"100%",position:"relative",marginTop:"16px","&:before":{borderBottom:"1px solid rgba(0, 0, 0, 0.42)",left:"0px",bottom:"0px",content:'""',position:"absolute",right:"0px",transition:"border-bottom-color 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",pointerEvents:"none"},"&:after":{borderBottom:"2px solid rgb(25, 118, 210)",left:"0px",bottom:"0px",content:'""',position:"absolute",right:"0px",transform:"scaleX(0)",transition:"transform 200ms cubic-bezier(0, 0, 0.2, 1) 0ms",pointerEvents:"none"},".has-focus &:after":{transform:"scaleX(1)"},".has-error &:after":{borderBottomColor:"rgb(211, 47, 47)",transform:"scaleX(1)"}}),Q=(0,a.F4)({from:{display:"block"},label:"autoFillCancel"}),ee=(0,a.F4)({from:{display:"block"},label:"autoFill"}),te=(0,a.iv)({font:"inherit",letterSpacing:"inherit",color:"currentcolor",padding:"4px 0px 5px",border:"0px",boxSizing:"content-box",background:"none",height:"1.4375em",margin:"0px",display:"block",minWidth:"0px",width:"100%",WebkitTapHighlightColor:"transparent",animationName:`${Q}`,animationDuration:"10ms","&:focus":{outline:"0px"},"&:-webkit-autofill":{animationDuration:"5000s",animationName:`${ee}`}}),ne=(0,a.iv)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:"rgba(0, 0, 0, 0.54)",marginLeft:"8px"}),re=(0,a.iv)({color:"rgba(0, 0, 0, 0.6)",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"400",fontSize:"0.75rem",lineHeight:"1.66",letterSpacing:"0.03333em",textAlign:"left",margin:"3px 0px 0px",".has-error &":{color:"rgb(211, 47, 47)"}}),se=e=>{var t;const n=(0,s.createRef)(),i=e.inputRef?e.inputRef:(0,s.createRef)(),a=(0,s.useCallback)((e=>{var t,r;e||document.activeElement===i.current?null===(t=n.current)||void 0===t||t.classList.remove("empty"):null===(r=n.current)||void 0===r||r.classList.add("empty")}),[n,i]);return(0,s.useEffect)((()=>{var t,r;e.error?null===(t=n.current)||void 0===t||t.classList.add("has-error"):null===(r=n.current)||void 0===r||r.classList.remove("has-error")}),[n,e.error]),(0,s.useEffect)((()=>{a(e.value)}),[n,e.value,a]),(0,r.BX)("div",Object.assign({ref:n,css:G},{children:[(0,r.tZ)("label",Object.assign({css:J},{children:e.label})),(0,r.BX)("div",Object.assign({css:K},{children:[(0,r.tZ)("input",{type:e.type,autoComplete:!1===e.autoComplete?"new-password":"on",spellCheck:"false",value:e.value,css:te,ref:i,onFocus:()=>{var e,t;console.log("focuws"),null===(e=n.current)||void 0===e||e.classList.add("has-focus"),null===(t=n.current)||void 0===t||t.classList.remove("empty")},onBlur:()=>{var e,t,r;null===(e=n.current)||void 0===e||e.classList.remove("has-focus"),(null===(t=i.current)||void 0===t?void 0:t.value)||null===(r=n.current)||void 0===r||r.classList.add("empty")},onChange:t=>{var n;a(null===(n=i.current)||void 0===n?void 0:n.value),e.onChange&&e.onChange(t)},onAnimationStart:e=>{var t;e.animationName.endsWith("autoFillCancel")?a(null===(t=i.current)||void 0===t?void 0:t.value):a("value")}}),null!==(t=e.endAdornment)&&void 0!==t?t:(0,r.tZ)("div",{css:ne})]})),e.error&&(0,r.tZ)("p",Object.assign({css:re},{children:e.helperText}))]}))};var ie=n(3343),ae=n(1733);const oe=e=>{const t=(0,s.createRef)(),n=(0,s.createRef)(),[i,a]=(0,s.useState)(!1),[o,c]=(0,s.useState)(e.username);(0,s.useEffect)((()=>{c(e.username)}),[e.username]);const[u,d]=(0,s.useState)({});(0,s.useEffect)((()=>{d(e.history)}),[e.history]);const p=()=>{e.onClose(u)};return(0,r.BX)(M,Object.assign({style:{zIndex:1300},open:e.open},{children:[(0,r.BX)(l,Object.assign({style:{height:"45px",display:"flex",justifyContent:"center",alignItems:"center"}},{children:[(0,r.tZ)(h,Object.assign({style:{color:"inherit",position:"absolute",left:"5px"},onClick:p},{children:(0,r.tZ)(w.Z,{})})),(0,r.tZ)(m,Object.assign({variant:"h6"},{children:"Input username"}))]})),(0,r.BX)(_,Object.assign({style:{marginTop:"30px"},ref:t},{children:[(0,r.tZ)(se,{type:"text",error:i,label:"Username",value:o,autoFocus:!0,autoComplete:!1,onChange:e=>{c(e.target.value)},inputRef:n,endAdornment:(0,r.tZ)(h,Object.assign({size:"small",onClick:()=>{var e;c(""),null===(e=n.current)||void 0===e||e.focus()}},{children:(0,r.tZ)(ie.Z,{fontSize:"small"})})),helperText:i?"You should input username":""}),(0,r.BX)("div",Object.assign({style:{display:"flex",justifyContent:"center",marginTop:"30px"}},{children:[(0,r.tZ)(V,Object.assign({onClick:p},{children:"Cancel"})),(0,r.tZ)(V,Object.assign({onClick:()=>{o?(a(!1),e.onSubmit(o,u)):a(!0)}},{children:"Submit"}))]})),(0,r.tZ)("div",Object.assign({style:{marginTop:"30px"}},{children:(0,r.tZ)(D,{children:Object.keys(u).map((n=>{return s=n,e.open?(0,r.tZ)(A,Object.assign({onClick:()=>(c(s),void(t.current&&(t.current.scrollTop=0)))},{children:(0,r.BX)("div",Object.assign({style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"}},{children:[(0,r.tZ)(q,{alt:u[s].username,src:u[s].profileImage,style:{marginRight:"15px"}}),(0,r.BX)("div",Object.assign({style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"}},{children:[(0,r.tZ)("span",{children:u[s].name}),(0,r.tZ)("span",{children:u[s].username})]})),(0,r.tZ)(h,Object.assign({size:"small",edge:"end",onClick:t=>(async(t,n)=>{t.stopPropagation();const r=Object.assign({},u);delete r[n],await e.onUsernameDelete(r,n),d(r)})(t,s)},{children:(0,r.tZ)(ae.Z,{})}))]}))}),s):null;var s}))})}))]}))]}))};var le=n(7622),ce=n(3540);let ue=0,de=0;const pe=(0,s.memo)((e=>{ue=e.data.users.length-1;const t=(0,s.useCallback)((async(t,n)=>{await e.toggleFollow(!n.following,n)}),[e]),n=()=>{e.onClose(de)};return(0,r.BX)(M,Object.assign({style:{zIndex:1300,overflowX:"hidden"},open:e.open},{children:[(0,r.BX)(l,Object.assign({style:{height:45,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#fff"}},{children:[(0,r.tZ)(h,Object.assign({size:"small",style:{position:"absolute",left:"5px"},onClick:n},{children:(0,r.tZ)(w.Z,{})})),(0,r.tZ)(m,Object.assign({style:{color:"#888"},variant:"h6"},{children:e.account})),(0,r.tZ)(h,Object.assign({size:"small",style:{position:"absolute",right:"5px"},onClick:async()=>{await e.onLogout()&&n()}},{children:(0,r.tZ)(ce.Z,{})}))]})),(0,r.tZ)(_,Object.assign({style:{overflow:"hidden",padding:0}},{children:(0,r.tZ)(le.t7,Object.assign({style:{overflowX:"hidden"},height:e.height-45,itemCount:ue,itemSize:60,width:e.width,itemData:e.data.users,onScroll:({scrollOffset:e})=>{de=e},initialScrollOffset:e.initialScrollTop,onItemsRendered:({visibleStopIndex:t})=>{t===ue-1&&e.data.next&&e.onRequest()}},{children:({index:s,data:i,style:a})=>(0,r.BX)("div",Object.assign({css:ge,style:a},{children:[(0,r.tZ)(q,{alt:i[s].profileImage,src:i[s].profileImage,style:{marginRight:"15px",marginLeft:"24px"}}),(0,r.BX)("div",Object.assign({css:he,onClick:()=>{return t=i[s].username,n(),void e.onUserSelect(t);var t}},{children:[(0,r.tZ)("div",Object.assign({css:fe},{children:i[s].name})),(0,r.tZ)("div",Object.assign({css:fe},{children:i[s].username}))]})),i[s].following?(0,r.tZ)("button",Object.assign({css:be,onClick:e=>t(e,i[s])},{children:"Unfollow"})):(0,r.tZ)("button",Object.assign({css:me,onClick:e=>t(e,i[s])},{children:"Follow"}))]}))}))}))]}))})),ge=(0,a.iv)({display:"flex",alignItems:"center",flex:1}),he=(0,a.iv)({display:"flex",flexDirection:"column",flex:"1 1 auto"}),fe=(0,a.iv)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"14px",width:"200px"}),be=(0,a.iv)({padding:"5px 9px",borderRadius:"4px",fontSize:"14px",backgroundColor:"rgb(255, 255, 255)",color:"rgb(0, 0, 0)",border:"1px solid #ccc",marginRight:"20px"}),me=(0,a.iv)({padding:"5px 9px",borderRadius:"4px",fontSize:"14px",backgroundColor:"rgb(25, 118, 210)",color:"rgb(255, 255, 255)",border:"1px solid #ccc",marginRight:"20px"}),ye=pe;var ve=n(8557),xe=n(5671);const we=e=>{const[t,n]=(0,s.useState)(!1),[i,a]=(0,s.useState)(!1),[o,c]=(0,s.useState)(e.requireCode),[u,d]=(0,s.useState)(""),[p,g]=(0,s.useState)(""),[f,b]=(0,s.useState)(""),y="You should input username/password";return(0,s.useEffect)((()=>{c(e.requireCode)}),[e.requireCode]),(0,r.BX)(M,Object.assign({style:{zIndex:1300},open:e.open},{children:[(0,r.BX)(l,Object.assign({style:{height:"45px",display:"flex",justifyContent:"center",alignItems:"center"}},{children:[(0,r.tZ)(h,Object.assign({style:{color:"inherit",position:"absolute",left:"5px"},onClick:e.onClose},{children:(0,r.tZ)(w.Z,{})})),(0,r.tZ)(m,Object.assign({variant:"h6"},{children:"Authenticate"})),(0,r.tZ)(h,Object.assign({style:{color:"inherit",position:"absolute",right:"5px"},onClick:()=>{c(!o)}},{children:o?(0,r.tZ)(ve.Z,{}):(0,r.tZ)(xe.Z,{})}))]})),(0,r.tZ)(_,Object.assign({style:{marginTop:"30px"}},{children:o?(0,r.BX)("div",{children:[(0,r.tZ)(se,{type:"number",error:t,label:"Code",value:f,autoFocus:!0,autoComplete:!1,onChange:e=>{b(e.target.value)},helperText:i?"You should input code":""}),(0,r.tZ)("div",Object.assign({style:{display:"flex",justifyContent:"center",marginTop:"30px"}},{children:(0,r.tZ)(V,Object.assign({onClick:()=>{f?(a(!1),e.onCodeSubmit(f)):a(!0)}},{children:"Verify"}))}))]}):(0,r.BX)("div",{children:[(0,r.tZ)(se,{type:"text",error:t,label:"Username",value:u,autoFocus:!0,autoComplete:!0,onChange:e=>{d(e.target.value)},helperText:t?y:""}),(0,r.tZ)(se,{type:"password",error:t,label:"Password",value:p,autoFocus:!0,autoComplete:!0,onChange:e=>{g(e.target.value)},helperText:t?y:""}),(0,r.BX)("div",Object.assign({style:{display:"flex",justifyContent:"center",marginTop:"30px"}},{children:[(0,r.tZ)(V,Object.assign({onClick:e.onClose},{children:"Cancel"})),(0,r.tZ)(V,Object.assign({onClick:()=>{u&&p?(n(!1),e.onSubmit(u,p)):n(!0)}},{children:"Login"}))]}))]})}))]}))};var Oe=n(6111),je=n(1811),Ce=n(8201);const ke="right",Se="left",Ze={startX:0,startY:0,startTime:0,moveY:0,moveX:0,isMoved:!1,swiping:!1,close:!1,direction:"",left:0,degree:0};let Ie=Object.assign({},Ze),Te=!1,Re=!1,ze=0,Le=null,Ee=0;const Pe=()=>Ie.direction===ke||Ie.direction===Se,Xe=(0,a.iv)({display:"flex",justifyContent:"flex-start",alignItems:"center"}),Me=(0,a.iv)({maxHeight:"100%",maxWidth:"100%",transition:"transform 0.7s",willChange:"transform"}),Be=(0,a.iv)({position:"fixed",top:0,left:0,overflow:"hidden",backgroundColor:"#2a2727d4",zIndex:2e3,height:"100%",width:"100%",userSelect:"none"}),De=(0,a.iv)({position:"absolute",margin:0,padding:0,opacity:0,bottom:"3em",left:"10px",zIndex:2e3,width:"100%",height:"100%x",display:"flex",justifyContent:"flex-start",alignItems:"self-start",flexDirection:"column",transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","& div":{letterSpacing:"0.02857em",margin:"5px 5px 5px 0px",padding:"5px",color:"#fff",borderRadius:"5px",backgroundColor:"rgb(25, 118, 210)"},".tags &":{opacity:1}}),Fe=(0,a.iv)({position:"fixed",bottom:"5px",left:"5px",display:"none",".has-tags + &":{display:"inline-flex"}}),Ae=(0,s.memo)((e=>{const t=(0,s.useRef)(null),n=(0,s.useCallback)((e=>{var n,r,s;Ie.startX=e.touches[0].clientX+(null===(n=t.current)||void 0===n?void 0:n.scrollLeft),Ie.startY=e.touches[0].clientY,Ie.startTime=(new Date).getTime(),Ie.swiping=!0,Ie.left=null!==(s=null===(r=t.current)||void 0===r?void 0:r.scrollLeft)&&void 0!==s?s:0}),[]),i=(0,s.useCallback)((()=>{Ie=Object.assign({},Ze)}),[]),a=(0,s.useCallback)((()=>{i(),e.onClose()}),[i,e]),o=(0,s.useCallback)((()=>{var n;Ie.isMoved&&(new Date).getTime()-Ie.startTime<=150||Ie.degree>.6?(Ee=Ie.direction===Se?Ie.left+e.width:Ie.left-e.width,null===(n=t.current)||void 0===n||n.scrollTo({left:Ee,behavior:"smooth"})):(Ee=Ie.left,t.current&&(t.current.scrollLeft=Ee)),setTimeout((()=>{t.current&&t.current.scrollLeft!==Ee&&(t.current.scrollLeft=Ee)}),150),i()}),[i,e.width]),l=(0,s.useCallback)((()=>{Ie.close||Math.abs(Ie.moveY)/100>.15?a():(t.current&&(t.current.style.transform="translate(0px, 0px)"),i())}),[a,i]),c=(0,s.useCallback)((()=>{Ie.swiping&&(Pe()?o():l())}),[l,o]),u=(0,s.useCallback)((()=>{var n;const r=(Ie.moveX-Ie.left)/e.width;Ie.degree=Math.abs(r),Ie.isMoved=Ie.degree>0,null===(n=t.current)||void 0===n||n.scrollTo({left:Ie.moveX}),Ie.degree>.6&&o()}),[o,e.width]),d=(0,s.useCallback)((()=>{Ie.degree=Math.abs(Ie.moveY)/e.height,Ie.degree>.15&&(Ie=Object.assign(Object.assign({},Ie),{close:!0})),t.current&&(t.current.style.transform=`translate(0px, ${-Ie.moveY}px)`)}),[e.height]),p=(0,s.useCallback)((e=>{if(!Ie.swiping||Re)return;m();const t=Ie.startX-e.touches[0].clientX,n=Ie.startY-e.touches[0].clientY;Ie.direction||(Ie.direction=((e,t)=>Math.abs(e)>Math.abs(t)?e>0?Se:ke:t>0?"up":"down")(t-Ie.left,n)),Ie=Object.assign(Object.assign({},Ie),{moveY:n,moveX:t}),Pe()?u():d()}),[u,d]),g=(0,s.useCallback)((e=>{if(!t.current)return;const n=e.currentTarget;if(Le=n.getBoundingClientRect(),Re)i(),n.style.transform="scale(1)",Re=!1;else{const t=e.pageX-Le.left;let r=e.pageY-Le.top;const s=Le.top-2*r,i=Le.top+3*Le.height-2*r;s>0?r=Le.top/2:i<window.screen.height&&(r=Le.height-Le.top/2),n.style.transformOrigin=`${t}px ${r}px`,n.style.transform="scale(3)",Re=!0}}),[i]),f=(0,s.useCallback)((e=>{if(!Te)return Te=!0,void(ze=window.setTimeout((()=>{Te=!1}),300));clearTimeout(ze),Te=!1,m(),g(e)}),[g]),b=(0,s.useCallback)((e=>{"Escape"===e.key&&a()}),[a]),m=()=>{t.current&&t.current.classList.contains("tags")&&t.current.classList.remove("tags")};return(0,s.useEffect)((()=>{var e,r,s;return document.body.style.overflow="hidden",null===(e=t.current)||void 0===e||e.addEventListener("touchstart",n,{passive:!0}),null===(r=t.current)||void 0===r||r.addEventListener("touchmove",p,{passive:!0}),null===(s=t.current)||void 0===s||s.addEventListener("touchend",c,{passive:!0}),document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}}),[n,p,c,b]),(0,s.useEffect)((()=>()=>{document.body.style.overflow=""}),[]),(0,r.BX)("div",Object.assign({css:Be},{children:[(0,r.tZ)(le.t7,Object.assign({height:e.height,itemCount:e.data.length,itemSize:e.width,width:e.width,layout:"horizontal",overscanCount:4,outerRef:t,itemData:e.data,initialScrollOffset:e.width*(1*e.startIndex),style:{overflow:"hidden",background:"#121111",WebkitTransform:"translateZ(0px)"},onItemsRendered:({visibleStartIndex:n})=>{Ie.swiping||(e.onImageRendered(n),t.current&&(e.data[n].taggedUsers.length>0?t.current.classList.add("has-tags"):t.current.classList.remove("has-tags")))}},{children:({index:t,style:n})=>{const s=e.data[t].taggedUsers?e.data[t].taggedUsers:[];return(0,r.BX)("div",Object.assign({style:n,css:Xe},{children:[(0,r.tZ)("div",Object.assign({css:De},{children:s.map((t=>(0,r.tZ)("div",Object.assign({onClick:()=>(t=>{e.onUserTagClick(t)})(t)},{children:t.username}),t.id)))})),(0,r.tZ)("img",{css:Me,alt:e.data[t].id,src:e.data[t].media_url,onClick:f})]}))}})),(0,r.tZ)("span",Object.assign({css:Fe},{children:(0,r.tZ)(h,Object.assign({onClick:()=>{t.current&&(t.current.classList.contains("tags")?m():t.current.classList.add("tags"))}},{children:(0,r.tZ)(Ce.Z,{sx:{color:"rgb(135 129 129)",mr:1,my:.5}})}))}))]}))})),He=(0,s.forwardRef)(((e,t)=>{const n=e.width/3,i=Math.ceil(e.data.length/3),o=(0,s.createRef)(),l=(0,s.useRef)(0),c=(0,s.useRef)(0),u=(0,s.useRef)(0),[d,p]=(0,s.useState)(!1);(0,s.useImperativeHandle)(t,(()=>({scrollTo:e=>{var t;null===(t=o.current)||void 0===t||t.scrollTo({scrollLeft:0,scrollTop:e})}})));const g=(0,s.useCallback)((()=>{i<=0||(l.current===c.current?e.onIdle&&e.onIdle(l.current):c.current=l.current)}),[e,i]);(0,s.useEffect)((()=>{const e=setInterval(g,1e4);return()=>clearInterval(e)}),[g]);const h=(0,a.iv)({display:"flex",justifyContent:"center",alignItems:"center",flex:1,marginTop:`${e.margin}px`,overflowY:"auto",overflowX:"hidden"}),f=(0,a.iv)({height:"100%",left:0,position:"absolute",top:0,width:"100%",objectFit:"cover"});return(0,r.BX)(s.Fragment,{children:[d&&(0,r.tZ)(Ae,{width:e.width,height:e.height,onClose:()=>{p(!1)},data:e.data,startIndex:u.current,onImageRendered:e=>{var t;null===(t=o.current)||void 0===t||t.scrollToItem({rowIndex:Math.floor(e/3)})},onUserTagClick:t=>{e.onUserTagClick&&e.onUserTagClick(t)}}),(0,r.tZ)("div",Object.assign({css:h},{children:(0,r.tZ)(le.Ym,Object.assign({ref:o,columnCount:3,columnWidth:n,height:e.height-e.margin,rowCount:i,rowHeight:n,width:e.width,itemData:e.data,overscanRowCount:0,onScroll:({scrollTop:e})=>{l.current=e},onItemsRendered:({visibleRowStopIndex:t})=>{t===i-1&&e.onLastItemRenrered&&e.onLastItemRenrered()}},{children:({columnIndex:e,data:t,rowIndex:n,style:s})=>{const i=e+3*n;return(0,r.tZ)("div",Object.assign({style:s},{children:t[i]?(0,r.tZ)("img",{css:f,alt:t[i].id,src:t[i].media_url,onClick:()=>(e=>{u.current=e,p(!0)})(i)}):(0,r.tZ)("div",{})}))}}))}))]})})),Ue=(0,s.memo)(He),We=e=>(0,r.BX)(M,Object.assign({style:{zIndex:3e3},open:e.open},{children:[(0,r.BX)(l,Object.assign({style:{position:"fixed",height:e.margin,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgb(33 86 139)"}},{children:[(0,r.tZ)(h,Object.assign({style:{color:"inherit",position:"absolute",left:"5px"},onClick:e.onClose},{children:(0,r.tZ)(w.Z,{})})),(0,r.tZ)(m,Object.assign({variant:"subtitle1"},{children:e.user.username})),(0,r.tZ)(h,Object.assign({style:{color:"inherit",position:"absolute",right:"5px"},onClick:()=>{const t=!e.user.following;e.toggleFollow(t,e.user)}},{children:!0===e.user.following?(0,r.tZ)(je.Z,{}):(0,r.tZ)(Oe.Z,{})}))]})),(0,r.tZ)(Ue,{data:e.data,height:e.height,width:e.width,margin:e.margin,onLastItemRenrered:e.onLastItemRenrered})]}));var qe=n(666),Ye=n(4020),Ne=n(9485),_e=n(9669),$e=n.n(_e);Error;class Ve extends Error{constructor(e,t){super(e),this.name="RequestError",this.data=t,Object.setPrototypeOf(this,Ve.prototype)}}const Ge={id:"",igId:"",username:"",name:"",profileImage:"",biography:"",following:!1},Je=(e,t,n)=>({method:t,url:e,headers:{"Content-Type":"application/json"},data:n,withCredentials:!0}),Ke=e=>"true"===e["ig-auth"],Qe=e=>{const t="true"===e.response.headers["ig-auth"];throw new Ve(e.response.data,{igAuth:t})},et=async(e,t,n)=>{const r=Je("/querymore","POST",{user:e,next:t,preview:n});try{const e=await $e().request(r);return{status:Ke(e.headers),data:e.data}}catch(e){return Qe(e)}},tt={isLoading:!1,openUsernameModal:!1,openImageModal:!1,openLoginModal:!1,openAccountModal:!1,openPreviewModal:!1,hasError:!1,errorMessage:""},nt="start",rt="end",st="toggleUsernameModal",it="toggleLoginModal",at="toggleAccountModal",ot="togglePreviewModal",lt="showError",ct="hideError",ut=(e,t)=>{switch(t.type){case nt:return Object.assign(Object.assign({},e),{isLoading:!0});case rt:return Object.assign(Object.assign({},e),{isLoading:!1});case st:return Object.assign(Object.assign({},e),{openUsernameModal:t.value});case"toggleImageModal":return Object.assign(Object.assign({},e),{openImageModal:t.value});case it:return Object.assign(Object.assign({},e),{openLoginModal:t.value});case at:return Object.assign(Object.assign({},e),{openAccountModal:t.value});case ot:return Object.assign(Object.assign({},e),{openPreviewModal:t.value});case lt:return Object.assign(Object.assign({},e),{hasError:!0,errorMessage:t.value});case ct:return Object.assign(Object.assign({},e),{hasError:!1,errorMessage:""});default:return e}},dt={locked:!1,next:"",user:Ge,data:[],previewNext:"",previewUser:Ge,previewData:[],selected:0,history:{},followings:{users:[],hasNext:!1,next:""},mediaScrollTop:0,followingScrollTop:0},pt="update",gt="append",ht="history",ft="followings",bt="updateFollowStatus",mt="toggleLock",yt="mediaScrollTop",vt="followingScrollTop",xt="preview",wt=(e,t)=>{switch(t.type){case"reset":{const n=dt;return n.user.username=t.value,Object.assign(Object.assign({},e),n)}case pt:return Object.assign(Object.assign({},e),{user:t.value.user,data:t.value.media,selected:0,next:t.value.next,history:t.value.history,mediaScrollTop:t.value.rowIndex});case gt:return Object.assign(Object.assign({},e),{data:e.data.concat(t.value.media),next:t.value.next,mediaScrollTop:t.value.rowIndex});case"select":return Object.assign(Object.assign({},e),{selected:t.value});case ht:return Object.assign(Object.assign({},e),{history:t.value});case yt:return Object.assign(Object.assign({},e),{mediaScrollTop:t.value});case vt:return Object.assign(Object.assign({},e),{followingScrollTop:t.value});case mt:return Object.assign(Object.assign({},e),{locked:t.value});case ft:{let n;n=e.followings.users.length>0?e.followings.users.concat(t.value.users):t.value.users;const r={users:n,hasNext:t.value.hasNext,next:t.value.next};return Object.assign(Object.assign({},e),{followings:r})}case bt:{let n=!1;const r=e.followings.users.map((e=>(e.username===t.value.user.username&&(e.following=t.value.doFollow,n=!0),e)));return n||r.push(t.value.user),Object.assign(Object.assign({},e),{followings:Object.assign(Object.assign({},e.followings),{users:r})})}case xt:return e.previewUser.username===t.value.user.username?Object.assign(Object.assign({},e),{previewData:e.previewData.concat(t.value.media),previewNext:t.value.next}):Object.assign(Object.assign({},e),{previewUser:t.value.user,previewData:t.value.media,previewNext:t.value.next});default:return e}},Ot={account:"",success:!1,challenge:!1,endpoint:""},jt="init",Ct="update",kt="toggleAuth",St=(e,t)=>{switch(t.type){case jt:{const n=Ot;return n.account=t.value,Object.assign(Object.assign({},e),n)}case Ct:return Object.assign(Object.assign({},e),t.value);case kt:return t.value.account?Object.assign(Object.assign({},e),{success:t.value.success,account:t.value.account}):Object.assign(Object.assign({},e),{success:t.value.success});default:return e}};i.render((0,r.tZ)(s.StrictMode,{children:(0,r.tZ)((function(){const{width:e,height:t}=(()=>{const e=()=>{const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}},[t,n]=(0,s.useState)(e());return(0,s.useEffect)((()=>{const t=()=>{n(e())};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[]),t})(),n=(0,s.useRef)({}),[i,a]=(0,s.useReducer)(ut,tt),[o,c]=(0,s.useReducer)(wt,dt),[u,d]=(0,s.useReducer)(St,Ot),p=(0,s.useCallback)((async(e,t="")=>{if(d({type:kt,value:{success:e.data.igAuth}}),!e.data.igAuth)return z();a(t?{type:lt,value:t}:{type:lt,value:e.message})}),[]),g=(0,s.useCallback)((async e=>{o.mediaScrollTop!==e&&(await(async(e,t)=>{const n=Je("/save","POST",{username:e,rowIndex:t});try{await $e().request(n)}catch(e){return Qe(e)}})(o.user.username,e),c({type:yt,value:e}))}),[o.mediaScrollTop,o.user.username]),f=(0,s.useCallback)((async({username:e,history:t,refresh:r=!1,preview:s=!1})=>{var i;a({type:nt});try{const o=await(async(e,t,n,r)=>{const s=Je("/query","POST",{username:e,history:t,refresh:n,preview:r});try{const e=await $e().request(s);return{status:Ke(e.headers),data:e.data}}catch(e){return Qe(e)}})(e,t,r,s);d({type:kt,value:{success:o.status,account:o.data.account}}),s?c({type:xt,value:o.data}):(c({type:pt,value:o.data}),null===(i=n.current)||void 0===i||i.scrollTo(o.data.rowIndex))}catch(e){p(e)}finally{a({type:rt})}}),[p]),b=(0,s.useCallback)((async()=>{if(!o.locked&&o.next)try{c({type:mt,value:!0});const e=await et(o.user,o.next,!1);d({type:kt,value:{success:e.status}}),c({type:gt,value:e.data})}catch(e){p(e)}finally{c({type:mt,value:!1})}}),[p,o.locked,o.next,o.user]),y=(0,s.useCallback)((async()=>{if(!o.locked&&o.previewNext)try{c({type:mt,value:!0});const e=await et(o.previewUser,o.previewNext,!0);d({type:kt,value:{success:e.status}}),c({type:xt,value:e.data})}catch(e){p(e)}finally{c({type:mt,value:!1})}}),[p,o.locked,o.previewUser,o.previewNext]),x=(0,s.useCallback)((async(e,t)=>{a({type:nt});try{await(async(e,t,n)=>{const r=Je("/remove","POST",{history:e,current:t,target:n});try{await $e().request(r)}catch(e){return Qe(e)}})(e,o.user.username,t)}catch(e){p(e,"Update history failed")}finally{a({type:rt})}}),[p,o.user.username]),w=(0,s.useCallback)((async(e,t)=>{a({type:nt});try{d({type:jt,value:e});const n=await(async(e,t)=>{const n=Je("/login","POST",{account:e,password:t});try{return(await $e().request(n)).data}catch(e){return Qe(e)}})(e,t);d({type:Ct,value:n.status}),n.status.challenge||(c({type:pt,value:n.media}),a({type:it,value:!n.status.success}))}catch(e){p(e,"Login attempt failed")}finally{a({type:rt})}}),[p]),O=(0,s.useCallback)((async e=>{a({type:nt});try{const t=await(async(e,t,n)=>{const r=Je("/challenge","POST",{account:e,code:t,endpoint:n});try{return(await $e().request(r)).data}catch(e){return Qe(e)}})(u.account,e,u.endpoint);d({type:Ct,value:t.status}),t.status.challenge||(c({type:pt,value:t.media}),a({type:it,value:!t.status.success}))}catch(e){p(e,"Verification failed")}finally{a({type:rt})}}),[p,u.account,u.endpoint]),j=(0,s.useCallback)((async()=>{try{c({type:mt,value:!0});const e=await(async e=>{const t=Je("/following","POST",{next:e});try{const e=await $e().request(t);return{status:Ke(e.headers),data:e.data}}catch(e){return Qe(e)}})(o.followings.next);d({type:kt,value:{success:e.status}}),c({type:ft,value:e.data})}catch(e){p(e)}finally{c({type:mt,value:!1})}}),[p,o.followings.next]),C=(0,s.useCallback)((async()=>{!o.locked&&o.followings.hasNext&&await j()}),[o.locked,o.followings.hasNext,j]),k=(0,s.useCallback)((e=>{c({type:vt,value:e}),a({type:at,value:!1})}),[]),S=(0,s.useCallback)((async e=>{await f({username:e,history:o.history})}),[f,o.history]),I=(0,s.useCallback)((async()=>{if(!window.confirm("Are you sure to logout?"))return!1;a({type:nt});try{const e=await(async()=>{const e=Je("/logout","POST",{});try{return(await $e().request(e)).data}catch(e){return Qe(e)}})();return d({type:jt,value:""}),c({type:pt,value:e.media}),!0}catch(e){return p(e,"Logout attempt failed"),!1}finally{a({type:rt})}}),[p]),T=(0,s.useCallback)((async()=>{window.confirm("Refresh?")&&await f({username:o.user.username,history:o.history,refresh:!0})}),[f,o.user.username,o.history]),R=(0,s.useCallback)((async(e,t)=>{a({type:nt});try{return e?await(async e=>{const t=Je("/follow","POST",{user:e});try{return await $e().request(t)}catch(e){return Qe(e)}})(t):await(async e=>{const t=Je("/unfollow","POST",{user:e});try{return await $e().request(t)}catch(e){return Qe(e)}})(t),c({type:bt,value:{doFollow:e,user:t}}),!0}catch(e){return p(e,"Follow/Unfollow failed"),!1}finally{a({type:rt})}}),[p]),z=()=>{a({type:it,value:!0})},E=(0,s.useCallback)((async e=>{await f({username:e.username,history:o.history,preview:!0}),a({type:ot,value:!0})}),[f,o.history]);return(0,s.useEffect)((()=>{f({username:"",history:{}})}),[f]),(0,r.BX)(s.Fragment,{children:[(0,r.tZ)(v,Object.assign({style:{color:"#fff",zIndex:9e3},open:i.isLoading},{children:(0,r.tZ)(L,{})})),i.openUsernameModal&&(0,r.tZ)(oe,{open:i.openUsernameModal,username:o.user.username,onSubmit:async(e,t)=>{a({type:st,value:!1}),await f({username:e,history:t})},onClose:e=>{c({type:ht,value:e}),a({type:st,value:!1})},onUsernameDelete:x,history:o.history}),i.openLoginModal&&(0,r.tZ)(we,{open:i.openLoginModal,onClose:()=>{a({type:it,value:!1})},onSubmit:w,onCodeSubmit:O,requireCode:u.challenge}),i.openAccountModal&&(0,r.tZ)(ye,{open:i.openAccountModal,account:u.account,data:o.followings,onUserSelect:S,onClose:k,height:t,width:e,onRequest:C,onLogout:I,toggleFollow:R,initialScrollTop:o.followingScrollTop}),i.openPreviewModal&&(0,r.tZ)(We,{open:i.openPreviewModal,user:o.previewUser,data:o.previewData,height:t,width:e,margin:45,onClose:()=>{a({type:ot,value:!1})},toggleFollow:R,onLastItemRenrered:y}),i.hasError&&(0,r.tZ)(Z,Object.assign({style:{zIndex:9e3},childStyle:{width:"100%"},open:i.hasError,autoHideDuration:3e3,onClose:()=>a({type:ct})},{children:i.errorMessage})),(0,r.BX)(l,Object.assign({style:{position:"fixed",height:45,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#fff"}},{children:[u.success?(0,r.tZ)(h,Object.assign({size:"small",style:{position:"absolute",left:"5px"},onClick:async()=>{o.followings.users.length<=0&&await j(),u.success&&a({type:at,value:!0})}},{children:(0,r.tZ)(Ye.Z,{})})):(0,r.tZ)(h,Object.assign({size:"small",style:{position:"absolute",left:"5px"},onClick:z},{children:(0,r.tZ)(Ne.Z,{})})),(0,r.tZ)(h,Object.assign({size:"small",style:{position:"absolute",right:"5px"},onClick:T},{children:(0,r.tZ)(qe.Z,{})})),(0,r.tZ)(h,Object.assign({style:{padding:0},type:"button",onClick:()=>{a({type:st,value:!0})}},{children:(0,r.BX)("div",Object.assign({style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"}},{children:[(0,r.tZ)(Ce.Z,{sx:{color:"action.active",mr:1,my:.5}}),(0,r.tZ)(m,Object.assign({variant:"subtitle1",style:{flexGrow:1,color:"#888"}},{children:o.user.username?o.user.username:"User not found"}))]}))}))]})),(0,r.tZ)(Ue,{ref:n,data:o.data,onIdle:g,onLastItemRenrered:b,onUserTagClick:E,height:t,width:e,margin:45})]})}),{})}),document.getElementById("root"))}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return r[e](n,n.exports,i),n.exports}i.m=r,e=[],i.O=(t,n,r,s)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,r,s]=e[u],o=!0,l=0;l<n.length;l++)(!1&s||a>=s)&&Object.keys(i.O).every((e=>i.O[e](n[l])))?n.splice(l--,1):(o=!1,s<a&&(a=s));if(o){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[n,r,s]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var s=Object.create(null);i.r(s);var a={};t=t||[null,n({}),n([]),n(n)];for(var o=2&r&&e;"object"==typeof o&&!~t.indexOf(o);o=n(o))Object.getOwnPropertyNames(o).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,i.d(s,a),s},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var r,s,[a,o,l]=n,c=0;if(a.some((t=>0!==e[t]))){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);if(l)var u=l(i)}for(t&&t(n);c<a.length;c++)s=a[c],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(u)},n=self.webpackChunkinsview=self.webpackChunkinsview||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=i.O(void 0,[736],(()=>i(1251)));a=i.O(a)})();