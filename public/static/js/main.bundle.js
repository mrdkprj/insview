(()=>{"use strict";var e,t,r,n={3639:(e,t,r)=>{var n=r(5944),s=r(7294),i=r(3935),a=r(917);const o=(0,a.iv)({transition:"box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",boxShadow:"rgb(0 0 0 / 20%) 0px 2px 4px -1px, rgb(0 0 0 / 14%) 0px 4px 5px 0px, rgb(0 0 0 / 12%) 0px 1px 10px 0px",display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:"0",zIndex:"1100",top:"0px",left:"auto",right:"0px",backgroundColor:"rgb(25, 118, 210)",color:"rgb(255, 255, 255)",position:"relative"}),l=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);return(0,n.tZ)("header",Object.assign({css:o,style:t.style},{children:t.children}))},c=(0,a.iv)({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",backgroundColor:"transparent",outline:"0px",border:"0px",margin:"0px",cursor:"pointer",userSelect:"none",verticalAlign:"middle",appearance:"none",textDecoration:"none",textAlign:"center",flex:"0 0 auto",borderRadius:"50%",overflow:"visible",color:"rgba(0, 0, 0, 0.54)",transition:"background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",WebkitTapHighlightColor:"transparent",fontSize:"1.125rem"}),u=(0,a.iv)({padding:"5px"}),d=(0,a.iv)({padding:"8px"}),p=(0,a.iv)({margin:"0px 0px 0px -12px"}),g=(0,a.iv)({margin:"0px -3px 0px 0px"}),h=e=>{const t=[c];return e.css&&t.push(e.css),"small"===e.size&&t.push(u),"medium"===e.size&&t.push(d),"start"===e.edge&&t.push(p),"end"===e.edge&&t.push(g),(0,n.tZ)("button",Object.assign({css:t,style:e.style,onClick:t=>e.onClick?e.onClick(t):t},{children:e.children}))};const f=(0,a.iv)({margin:"0px",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"400",fontSize:"1rem",lineHeight:"1.75",letterSpacing:"0.00938em"}),b=(0,a.iv)({margin:"0px",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"500",fontSize:"1.25rem",lineHeight:"1.6",letterSpacing:"0.0075em"}),m=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);const r="subtitle1"===t.variant?f:b;return(0,n.tZ)("div",Object.assign({css:r,style:t.style},{children:t.children}))};const y=(0,a.iv)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",inset:"0px",backgroundColor:"rgba(0, 0, 0, 0.5)"}),v=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);const[r,i]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{i(t.open)}),[t.open]),r?(0,n.tZ)("div",Object.assign({css:y,style:t.style},{children:t.children})):null};var x=r(2141),w=r(594);const O=(0,a.iv)({position:"fixed",display:"flex",left:"8px",right:"8px",justifyContent:"center",alignItems:"center",top:"8px","@media(min-width: 600px)":{top:"24px",left:"50%",right:"auto",transform:"translateX(-50%)"}}),j=(0,a.iv)({transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",opacity:0,borderRadius:"4px",boxShadow:"rgb(0 0 0 / 20%) 0px 3px 5px -1px, rgb(0 0 0 / 14%) 0px 6px 10px 0px, rgb(0 0 0 / 12%) 0px 1px 18px 0px",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"500",fontSize:"0.875rem",lineHeight:"1.43",letterSpacing:"0.01071em",backgroundColor:"rgb(211, 47, 47)",display:"flex",padding:"6px 16px",color:"rgb(255, 255, 255)"}),C=(0,a.iv)({marginRight:"12px",padding:"7px 0px",display:"flex",fontSize:"22px",opacity:"0.9"}),k=(0,a.iv)({padding:"8px 0px"}),S=(0,a.iv)({display:"flex",alignItems:"flex-start",padding:"4px 0px 0px 16px",marginLeft:"auto",marginRight:"-8px"}),Z=e=>{const t=(0,s.useRef)(0),r=(0,s.useRef)(0),i=(0,s.useRef)(0),a=(0,s.createRef)(),[o,l]=(0,s.useState)(e.open),c=(0,s.useCallback)((()=>{clearTimeout(r.current),clearTimeout(i.current),i.current=window.setTimeout((()=>{a.current&&(a.current.style.opacity="",a.current.style.transform="scale(0)")}),200)}),[a]),u=(0,s.useCallback)((()=>{clearTimeout(t.current),t.current=window.setTimeout((()=>{a.current&&(a.current.style.opacity="1",a.current.style.transform="none")}),250)}),[a]),d=(0,s.useCallback)((()=>{clearTimeout(r.current),r.current=window.setTimeout((()=>{c()}),e.autoHideDuration)}),[c,e.autoHideDuration]);return(0,s.useEffect)((()=>{l(e.open)}),[e.open]),(0,s.useEffect)((()=>{console.log("ef"),o&&(u(),d())}),[o,u,d]),(0,s.useEffect)((()=>()=>c()),[c]),o?(0,n.tZ)("div",Object.assign({css:O,style:e.style},{children:(0,n.BX)("div",Object.assign({css:j,style:e.childStyle,ref:a},{children:[(0,n.tZ)("div",Object.assign({css:C},{children:(0,n.tZ)(x.Z,{fontSize:"inherit",color:"inherit"})})),(0,n.tZ)("div",Object.assign({css:k},{children:e.children})),(0,n.tZ)("div",Object.assign({css:S},{children:(0,n.tZ)(h,Object.assign({size:"small",onClick:e.onClose,style:{color:"inherit"}},{children:(0,n.tZ)(w.Z,{fontSize:"small",color:"inherit"})}))}))]}))})):null},I=(0,a.F4)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),R=(0,a.iv)({display:"inline-block",width:"40px",height:"40px",animation:`1.4s linear 0s infinite normal none running ${I}`}),T=(0,a.F4)({"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:0},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}}),z=(0,a.iv)({stroke:"currentcolor",strokeDasharray:"80px, 200px",strokeDashoffset:"0",animation:`1.4s ease-in-out 0s infinite normal none running ${T}`}),L=()=>(0,n.tZ)("span",Object.assign({css:R},{children:(0,n.tZ)("svg",Object.assign({viewBox:"22 22 44 44"},{children:(0,n.tZ)("circle",{css:z,cx:"44",cy:"44",r:"20.2",fill:"none",strokeWidth:"3.6"})}))})),E=(0,a.iv)({position:"fixed",inset:0}),P=(0,a.iv)({display:"flex",alignItems:"center",justifyContent:"center",outline:"0px",height:"100%",opacity:0,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"}),X=(0,a.iv)({backgroundColor:"rgb(255, 255, 255)",color:"rgba(0, 0, 0, 0.87)",transition:"box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",boxShadow:"rgb(0 0 0 / 20%) 0px 11px 15px -7px, rgb(0 0 0 / 14%) 0px 24px 38px 3px, rgb(0 0 0 / 12%) 0px 9px 46px 8px",margin:"0px",position:"relative",overflowY:"auto",display:"flex",flexDirection:"column",maxHeight:"none",maxWidth:"100%",width:"100%",height:"100%",borderRadius:"0px"}),M=e=>{const t=(0,s.useRef)(0),r=(0,s.useRef)(null),[i,a]=(0,s.useState)(e.open),o=(0,s.useCallback)((()=>{r.current&&(r.current.style.opacity="1")}),[]),l=(0,s.useCallback)((()=>{r.current&&(r.current.style.opacity="0.8",clearTimeout(t.current),t.current=window.setTimeout((()=>{r.current&&(r.current.style.opacity="0")}),200))}),[]);return(0,s.useEffect)((()=>{a(e.open)}),[e.open]),(0,s.useEffect)((()=>{i&&o()}),[i,o]),(0,s.useEffect)((()=>()=>l()),[l]),i?(0,n.tZ)("div",Object.assign({css:E,style:e.style},{children:(0,n.tZ)("div",Object.assign({css:P,ref:r},{children:(0,n.tZ)("div",Object.assign({css:X},{children:e.children}))}))})):null};const F=(0,a.iv)({listStyle:"none",margin:0,padding:"8px 0px",position:"relative"}),D=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);return(0,n.tZ)("ul",Object.assign({css:F},{children:t.children}))};const B=(0,a.iv)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",padding:"8px 16px",borderBottom:"1px solid rgba(0, 0, 0, 0.12)",backgroundClip:"padding-box",fontSize:"14px"}),U=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);return(0,n.tZ)("li",Object.assign({css:B,onClick:t.onClick},{children:t.children}))};const A=(0,a.iv)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:"0",width:"40px",height:"40px",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontSize:"1.25rem",lineHeight:"1",borderRadius:"50%",overflow:"hidden",userSelect:"none"}),H=(0,a.iv)({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:"10000px"}),W=(0,a.iv)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:"0",width:"40px",height:"40px",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontSize:"1.25rem",lineHeight:"1",borderRadius:"50%",overflow:"hidden",userSelect:"none",color:"rgb(255, 255, 255)",backgroundColor:"rgb(189, 189, 189)"}),q=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);const[r,i]=(0,s.useState)(!0);return(0,n.tZ)("div",Object.assign({css:A,style:t.style},{children:r?(0,n.tZ)("img",{css:H,src:t.src,alt:t.alt,onError:()=>{i(!1)}}):(0,n.tZ)("div",Object.assign({css:W},{children:(a=t.alt,a?a.charAt(0):"h")}))}));var a},Y=(0,s.forwardRef)(((e,t)=>(0,n.tZ)("div",Object.assign({css:N,style:e.style,ref:t},{children:e.children})))),N=(0,a.iv)({flex:"1 1 auto",overflowY:"auto",padding:"20px 24px"}),_=Y;const $=(0,a.iv)({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",backgroundColor:"transparent",outline:"0px",border:"0px",margin:"0px",cursor:"pointer",userSelect:"none",verticalAlign:"middle",appearance:"none",textDecoration:"none",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"500",fontSize:"0.875rem",lineHeight:"1.75",letterSpacing:"0.02857em",textTransform:"uppercase",minWidth:"64px",padding:"6px 8px",borderRadius:"4px",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",color:"rgb(25, 118, 210)"}),V=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);return(0,n.tZ)("button",Object.assign({type:"button",onClick:t.onClick,css:$},{children:t.children}))},G=(0,a.iv)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:"0px",padding:"0px",margin:"8px 0px 4px",border:"0px",verticalAlign:"top",width:"100%"}),J=(0,a.iv)({color:"rgba(0, 0, 0, 0.6)",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"400",fontSize:"1rem",lineHeight:"1.4375em",letterSpacing:"0.00938em",padding:"0px",display:"block",transformOrigin:"left top",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"133%",position:"absolute",left:"0px",top:"0px",transform:"translate(0px, -1.5px) scale(0.75)",transition:"color 200ms cubic-bezier(0, 0, 0.2, 1) 0ms, transform 200ms cubic-bezier(0, 0, 0.2, 1) 0ms, max-width 200ms cubic-bezier(0, 0, 0.2, 1) 0ms",".empty &":{maxWidth:"100%",transform:"translate(0px, 20px) scale(1)"},".has-focus &":{color:"rgba(25,118,210)"},".has-error &":{color:"rgb(211, 47, 47)"}}),K=(0,a.iv)({fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"400",fontSize:"1rem",lineHeight:"1.4375em",letterSpacing:"0.00938em",color:"rgba(0, 0, 0, 0.87)",boxSizing:"border-box",cursor:"text",display:"inline-flex",alignItems:"center",width:"100%",position:"relative",marginTop:"16px","&:before":{borderBottom:"1px solid rgba(0, 0, 0, 0.42)",left:"0px",bottom:"0px",content:'""',position:"absolute",right:"0px",transition:"border-bottom-color 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",pointerEvents:"none"},"&:after":{borderBottom:"2px solid rgb(25, 118, 210)",left:"0px",bottom:"0px",content:'""',position:"absolute",right:"0px",transform:"scaleX(0)",transition:"transform 200ms cubic-bezier(0, 0, 0.2, 1) 0ms",pointerEvents:"none"},".has-focus &:after":{transform:"scaleX(1)"},".has-error &:after":{borderBottomColor:"rgb(211, 47, 47)",transform:"scaleX(1)"}}),Q=(0,a.F4)({from:{display:"block"},label:"autoFillCancel"}),ee=(0,a.F4)({from:{display:"block"},label:"autoFill"}),te=(0,a.iv)({font:"inherit",letterSpacing:"inherit",color:"currentcolor",padding:"4px 0px 5px",border:"0px",boxSizing:"content-box",background:"none",height:"1.4375em",margin:"0px",display:"block",minWidth:"0px",width:"100%",WebkitTapHighlightColor:"transparent",animationName:`${Q}`,animationDuration:"10ms","&:focus":{outline:"0px"},"&:-webkit-autofill":{animationDuration:"5000s",animationName:`${ee}`}}),re=(0,a.iv)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:"rgba(0, 0, 0, 0.54)",marginLeft:"8px"}),ne=(0,a.iv)({color:"rgba(0, 0, 0, 0.6)",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"400",fontSize:"0.75rem",lineHeight:"1.66",letterSpacing:"0.03333em",textAlign:"left",margin:"3px 0px 0px",".has-error &":{color:"rgb(211, 47, 47)"}}),se=e=>{var t;const r=(0,s.createRef)(),i=e.inputRef?e.inputRef:(0,s.createRef)(),a=(0,s.useCallback)((e=>{var t,n;e||document.activeElement===i.current?null===(t=r.current)||void 0===t||t.classList.remove("empty"):null===(n=r.current)||void 0===n||n.classList.add("empty")}),[r,i]);return(0,s.useEffect)((()=>{var t,n;e.error?null===(t=r.current)||void 0===t||t.classList.add("has-error"):null===(n=r.current)||void 0===n||n.classList.remove("has-error")}),[r,e.error]),(0,s.useEffect)((()=>{a(e.value)}),[r,e.value,a]),(0,n.BX)("div",Object.assign({ref:r,css:G},{children:[(0,n.tZ)("label",Object.assign({css:J},{children:e.label})),(0,n.BX)("div",Object.assign({css:K},{children:[(0,n.tZ)("input",{type:e.type,autoComplete:!1===e.autoComplete?"new-password":"on",spellCheck:"false",value:e.value,css:te,ref:i,onFocus:()=>{var e,t;null===(e=r.current)||void 0===e||e.classList.add("has-focus"),null===(t=r.current)||void 0===t||t.classList.remove("empty")},onBlur:()=>{var e,t,n;null===(e=r.current)||void 0===e||e.classList.remove("has-focus"),(null===(t=i.current)||void 0===t?void 0:t.value)||null===(n=r.current)||void 0===n||n.classList.add("empty")},onChange:t=>{var r;a(null===(r=i.current)||void 0===r?void 0:r.value),e.onChange&&e.onChange(t)},onAnimationStart:e=>{var t;e.animationName.endsWith("autoFillCancel")?a(null===(t=i.current)||void 0===t?void 0:t.value):a("value")}}),null!==(t=e.endAdornment)&&void 0!==t?t:(0,n.tZ)("div",{css:re})]})),e.error&&(0,n.tZ)("p",Object.assign({css:ne},{children:e.helperText}))]}))};var ie=r(3343),ae=r(1733);const oe=e=>{const t=(0,s.createRef)(),r=(0,s.createRef)(),[i,a]=(0,s.useState)(!1),[o,c]=(0,s.useState)(e.username);(0,s.useEffect)((()=>{c(e.username)}),[e.username]);const[u,d]=(0,s.useState)({});(0,s.useEffect)((()=>{d(e.history)}),[e.history]);const p=()=>{e.onClose(u)};return(0,n.BX)(M,Object.assign({style:{zIndex:1300},open:e.open},{children:[(0,n.BX)(l,Object.assign({style:{height:"45px",display:"flex",justifyContent:"center",alignItems:"center"}},{children:[(0,n.tZ)(h,Object.assign({style:{color:"inherit",position:"absolute",left:"5px"},onClick:p},{children:(0,n.tZ)(w.Z,{})})),(0,n.tZ)(m,Object.assign({variant:"h6"},{children:"Search"}))]})),(0,n.BX)(_,Object.assign({style:{marginTop:"30px"},ref:t},{children:[(0,n.tZ)(se,{type:"text",error:i,label:"Username",value:o,autoFocus:!0,autoComplete:!1,onChange:e=>{c(e.target.value)},inputRef:r,endAdornment:(0,n.tZ)(h,Object.assign({size:"small",onClick:()=>{var e;c(""),null===(e=r.current)||void 0===e||e.focus()}},{children:(0,n.tZ)(ie.Z,{fontSize:"small"})})),helperText:i?"You should input username":""}),(0,n.BX)("div",Object.assign({style:{display:"flex",justifyContent:"center",marginTop:"30px"}},{children:[(0,n.tZ)(V,Object.assign({onClick:p},{children:"Cancel"})),(0,n.tZ)(V,Object.assign({onClick:()=>{o?(a(!1),e.onSubmit(o,u)):a(!0)}},{children:"Submit"}))]})),(0,n.tZ)("div",Object.assign({style:{marginTop:"30px"}},{children:(0,n.tZ)(D,{children:Object.keys(u).map((r=>{return s=r,e.open?(0,n.tZ)(U,Object.assign({onClick:()=>(c(s),void(t.current&&(t.current.scrollTop=0)))},{children:(0,n.BX)("div",Object.assign({style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"}},{children:[(0,n.tZ)(q,{alt:u[s].username,src:u[s].profileImage,style:{marginRight:"15px"}}),(0,n.BX)("div",Object.assign({style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"}},{children:[(0,n.tZ)("span",{children:u[s].name}),(0,n.tZ)("span",{children:u[s].username})]})),(0,n.tZ)(h,Object.assign({size:"small",edge:"end",onClick:t=>(async(t,r)=>{t.stopPropagation();const n=Object.assign({},u);delete n[r],await e.onUsernameDelete(n,r),d(n)})(t,s)},{children:(0,n.tZ)(ae.Z,{})}))]}))}),s):null;var s}))})}))]}))]}))};var le=r(7622),ce=r(3540);let ue=0,de=0;const pe=(0,s.memo)((e=>{ue=e.data.users.length-1;const t=(0,s.useCallback)((async(t,r)=>{await e.toggleFollow(!r.following,r)}),[e]),r=()=>{e.onClose(de)};return(0,n.BX)(M,Object.assign({style:{zIndex:1300,overflowX:"hidden"},open:e.open},{children:[(0,n.BX)(l,Object.assign({style:{height:45,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#fff"}},{children:[(0,n.tZ)(h,Object.assign({size:"small",style:{position:"absolute",left:"5px"},onClick:r},{children:(0,n.tZ)(w.Z,{})})),(0,n.tZ)(m,Object.assign({style:{color:"#888"},variant:"h6"},{children:e.account})),(0,n.tZ)(h,Object.assign({size:"small",style:{position:"absolute",right:"5px"},onClick:async()=>{await e.onLogout()&&r()}},{children:(0,n.tZ)(ce.Z,{})}))]})),(0,n.tZ)(_,Object.assign({style:{overflow:"hidden",padding:0}},{children:(0,n.tZ)(le.t7,Object.assign({style:{overflowX:"hidden"},height:e.height-45,itemCount:ue,itemSize:60,width:e.width,itemData:e.data.users,onScroll:({scrollOffset:e})=>{de=e},initialScrollOffset:e.initialScrollTop,onItemsRendered:({visibleStopIndex:t})=>{t===ue-1&&e.data.next&&e.onRequest()}},{children:({index:s,data:i,style:a})=>(0,n.BX)("div",Object.assign({css:ge,style:a},{children:[(0,n.tZ)(q,{alt:i[s].profileImage,src:i[s].profileImage,style:{marginRight:"15px",marginLeft:"24px"}}),(0,n.BX)("div",Object.assign({css:he,onClick:()=>{return t=i[s].username,r(),void e.onUserSelect(t);var t}},{children:[(0,n.tZ)("div",Object.assign({css:fe},{children:i[s].name})),(0,n.tZ)("div",Object.assign({css:fe},{children:i[s].username}))]})),i[s].following?(0,n.tZ)("button",Object.assign({css:be,onClick:e=>t(e,i[s])},{children:"Unfollow"})):(0,n.tZ)("button",Object.assign({css:me,onClick:e=>t(e,i[s])},{children:"Follow"}))]}))}))}))]}))})),ge=(0,a.iv)({display:"flex",alignItems:"center",flex:1}),he=(0,a.iv)({display:"flex",flexDirection:"column",flex:"1 1 auto"}),fe=(0,a.iv)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"14px",width:"200px"}),be=(0,a.iv)({padding:"5px 9px",borderRadius:"4px",fontSize:"14px",backgroundColor:"rgb(255, 255, 255)",color:"rgb(0, 0, 0)",border:"1px solid #ccc",marginRight:"20px"}),me=(0,a.iv)({padding:"5px 9px",borderRadius:"4px",fontSize:"14px",backgroundColor:"rgb(25, 118, 210)",color:"rgb(255, 255, 255)",border:"1px solid #ccc",marginRight:"20px"}),ye=pe;var ve=r(8557),xe=r(5671);const we=e=>{const[t,r]=(0,s.useState)(!1),[i,a]=(0,s.useState)(!1),[o,c]=(0,s.useState)(e.requireCode),[u,d]=(0,s.useState)(""),[p,g]=(0,s.useState)(""),[f,b]=(0,s.useState)(""),y="You should input username/password";return(0,s.useEffect)((()=>{c(e.requireCode)}),[e.requireCode]),(0,n.BX)(M,Object.assign({style:{zIndex:1300},open:e.open},{children:[(0,n.BX)(l,Object.assign({style:{height:"45px",display:"flex",justifyContent:"center",alignItems:"center"}},{children:[(0,n.tZ)(h,Object.assign({style:{color:"inherit",position:"absolute",left:"5px"},onClick:e.onClose},{children:(0,n.tZ)(w.Z,{})})),(0,n.tZ)(m,Object.assign({variant:"h6"},{children:"Authenticate"})),(0,n.tZ)(h,Object.assign({style:{color:"inherit",position:"absolute",right:"5px"},onClick:()=>{c(!o)}},{children:o?(0,n.tZ)(ve.Z,{}):(0,n.tZ)(xe.Z,{})}))]})),(0,n.tZ)(_,Object.assign({style:{marginTop:"30px"}},{children:o?(0,n.BX)("div",{children:[(0,n.tZ)(se,{type:"number",error:t,label:"Code",value:f,autoFocus:!0,autoComplete:!1,onChange:e=>{b(e.target.value)},helperText:i?"You should input code":""}),(0,n.tZ)("div",Object.assign({style:{display:"flex",justifyContent:"center",marginTop:"30px"}},{children:(0,n.tZ)(V,Object.assign({onClick:()=>{f?(a(!1),e.onCodeSubmit(f)):a(!0)}},{children:"Verify"}))}))]}):(0,n.BX)("div",{children:[(0,n.tZ)(se,{type:"text",error:t,label:"Username",value:u,autoFocus:!0,autoComplete:!0,onChange:e=>{d(e.target.value)},helperText:t?y:""}),(0,n.tZ)(se,{type:"password",error:t,label:"Password",value:p,autoFocus:!0,autoComplete:!0,onChange:e=>{g(e.target.value)},helperText:t?y:""}),(0,n.BX)("div",Object.assign({style:{display:"flex",justifyContent:"center",marginTop:"30px"}},{children:[(0,n.tZ)(V,Object.assign({onClick:e.onClose},{children:"Cancel"})),(0,n.tZ)(V,Object.assign({onClick:()=>{u&&p?(r(!1),e.onSubmit(u,p)):r(!0)}},{children:"Login"}))]}))]})}))]}))};var Oe=r(6111),je=r(1811),Ce=r(8201);const ke={startX:0,startY:0,startTime:0,moveY:0,moveX:0,isMoved:!1,swiping:!1,close:!1,direction:"",left:0,degree:0},Se="right",Ze="left",Ie=(0,a.iv)({display:"flex",justifyContent:"flex-start",alignItems:"center"}),Re=(0,a.iv)({maxHeight:"100%",maxWidth:"100%",transition:"transform 0.7s",willChange:"transform"}),Te=(0,a.iv)({position:"fixed",top:0,left:0,overflow:"hidden",backgroundColor:"#2a2727d4",zIndex:2e3,height:"100%",width:"100%",userSelect:"none"}),ze=(0,a.iv)({position:"absolute",margin:0,padding:0,opacity:0,bottom:"3em",left:"10px",zIndex:2e3,width:"100%",height:"100%x",display:"flex",justifyContent:"flex-start",alignItems:"self-start",flexDirection:"column",transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","& div":{letterSpacing:"0.02857em",margin:"5px 5px 5px 0px",padding:"5px",color:"#fff",borderRadius:"5px",backgroundColor:"rgb(25, 118, 210)"},".tags &":{opacity:1}}),Le=(0,a.iv)({position:"fixed",bottom:"5px",left:"5px",display:"none",".has-tags + &":{display:"inline-flex"}}),Ee=(0,s.memo)((e=>{const t=(0,s.useRef)(Object.assign({},ke)),r=(0,s.useRef)(null),i=(0,s.useRef)(!1),a=(0,s.useRef)(!1),o=(0,s.useRef)(0),l=(0,s.useRef)(0),c=(0,s.useRef)(null),u=()=>t.current.direction===Se||t.current.direction===Ze,d=(0,s.useCallback)((e=>{var r,n,s;t.current.startX=e.touches[0].clientX+(null===(r=c.current)||void 0===r?void 0:r.scrollLeft),t.current.startY=e.touches[0].clientY,t.current.startTime=(new Date).getTime(),t.current.swiping=!0,t.current.left=null!==(s=null===(n=c.current)||void 0===n?void 0:n.scrollLeft)&&void 0!==s?s:0}),[]),p=(0,s.useCallback)((()=>{t.current=Object.assign({},ke)}),[]),g=(0,s.useCallback)((()=>{p(),e.onClose()}),[p,e]),f=(0,s.useCallback)((()=>{var r;t.current.isMoved&&(new Date).getTime()-t.current.startTime<=150||t.current.degree>.6?(l.current=t.current.direction===Ze?t.current.left+e.width:t.current.left-e.width,null===(r=c.current)||void 0===r||r.scrollTo({left:l.current,behavior:"smooth"})):(l.current=t.current.left,c.current&&(c.current.scrollLeft=l.current)),setTimeout((()=>{c.current&&c.current.scrollLeft!==l.current&&(c.current.scrollLeft=l.current)}),150),p()}),[p,e.width]),b=(0,s.useCallback)((()=>{t.current.close||t.current.isMoved&&(new Date).getTime()-t.current.startTime<=150||t.current.degree>.15?g():(p(),c.current&&(c.current.style.transform="translate(0px, 0px)"))}),[g,p]),m=(0,s.useCallback)((()=>{t.current.swiping&&(u()?f():b())}),[b,f]),y=(0,s.useCallback)((()=>{var r;const n=(t.current.moveX-t.current.left)/e.width;t.current.degree=Math.abs(n),t.current.isMoved=t.current.degree>0,null===(r=c.current)||void 0===r||r.scrollTo({left:t.current.moveX}),t.current.degree>.6&&f()}),[f,e.width]),v=(0,s.useCallback)((()=>{t.current.degree=Math.abs(t.current.moveY)/e.height,t.current.degree>.15&&(t.current.close=!0),c.current&&(c.current.style.transform=`translate(0px, ${-t.current.moveY}px)`)}),[e.height]),x=(0,s.useCallback)((e=>{if(!t.current.swiping||a.current)return;C();const r=t.current.startX-e.touches[0].clientX,n=t.current.startY-e.touches[0].clientY;t.current.direction||(t.current.direction=((e,t)=>Math.abs(e)>Math.abs(t)?e>0?Ze:Se:t>0?"up":"down")(r-t.current.left,n)),t.current.moveY=n,t.current.moveX=r,u()?y():v()}),[y,v]),w=(0,s.useCallback)((e=>{if(!c.current)return;const t=e.currentTarget;if(r.current=t.getBoundingClientRect(),a.current)p(),t.style.transform="scale(1)",a.current=!1;else{const n=e.pageX-r.current.left;let s=e.pageY-r.current.top;const i=r.current.top-2*s,o=r.current.top+3*r.current.height-2*s;i>0?s=r.current.top/2:o<window.screen.height&&(s=r.current.height-r.current.top/2),t.style.transformOrigin=`${n}px ${s}px`,t.style.transform="scale(3)",a.current=!0}}),[p]),O=(0,s.useCallback)((e=>{if(!i.current)return i.current=!0,void(o.current=window.setTimeout((()=>{i.current=!1}),300));clearTimeout(o.current),i.current=!1,C(),w(e)}),[w]),j=(0,s.useCallback)((e=>{"Escape"===e.key&&g()}),[g]),C=()=>{c.current&&c.current.classList.contains("tags")&&c.current.classList.remove("tags")};return(0,s.useEffect)((()=>{var e,t,r;return document.body.style.overflow="hidden",null===(e=c.current)||void 0===e||e.addEventListener("touchstart",d,{passive:!0}),null===(t=c.current)||void 0===t||t.addEventListener("touchmove",x,{passive:!0}),null===(r=c.current)||void 0===r||r.addEventListener("touchend",m,{passive:!0}),document.addEventListener("keydown",j),()=>{document.removeEventListener("keydown",j)}}),[d,x,m,j]),(0,s.useEffect)((()=>()=>{document.body.style.overflow=""}),[]),(0,n.BX)("div",Object.assign({css:Te},{children:[(0,n.tZ)(le.t7,Object.assign({height:e.height,itemCount:e.data.length,itemSize:e.width,width:e.width,layout:"horizontal",overscanCount:4,outerRef:c,itemData:e.data,initialScrollOffset:e.width*(1*e.startIndex),style:{overflow:"hidden",background:"#121111",WebkitTransform:"translateZ(0px)"},onItemsRendered:({visibleStartIndex:r})=>{t.current.swiping||(e.onImageRendered(r),c.current&&(e.data[r].taggedUsers.length>0?c.current.classList.add("has-tags"):c.current.classList.remove("has-tags")))}},{children:({index:t,style:r})=>{const s=e.data[t].taggedUsers?e.data[t].taggedUsers:[];return(0,n.BX)("div",Object.assign({style:r,css:Ie},{children:[(0,n.tZ)("div",Object.assign({css:ze},{children:s.map((t=>(0,n.tZ)("div",Object.assign({onClick:()=>(t=>{e.onUserTagClick(t)})(t)},{children:t.username}),t.id)))})),(0,n.tZ)("img",{css:Re,alt:e.data[t].id,src:e.data[t].media_url,onClick:O})]}))}})),(0,n.tZ)("span",Object.assign({css:Le},{children:(0,n.tZ)(h,Object.assign({onClick:()=>{c.current&&(c.current.classList.contains("tags")?C():c.current.classList.add("tags"))}},{children:(0,n.tZ)(Ce.Z,{sx:{color:"rgb(135 129 129)",mr:1,my:.5}})}))}))]}))})),Pe=(0,s.forwardRef)(((e,t)=>{const r=e.width/3,i=Math.ceil(e.data.length/3),o=(0,s.createRef)(),l=(0,s.useRef)(0),c=(0,s.useRef)(0),u=(0,s.useRef)(0),[d,p]=(0,s.useState)(!1);(0,s.useImperativeHandle)(t,(()=>({scrollTo:e=>{var t;null===(t=o.current)||void 0===t||t.scrollTo({scrollLeft:0,scrollTop:e})}})));const g=(0,s.useCallback)((()=>{i<=0||(l.current===c.current?e.onIdle&&e.onIdle(l.current):c.current=l.current)}),[e,i]);(0,s.useEffect)((()=>{const e=setInterval(g,1e4);return()=>clearInterval(e)}),[g]);const h=(0,a.iv)({display:"flex",justifyContent:"center",alignItems:"center",flex:1,marginTop:`${e.margin}px`,overflowY:"auto",overflowX:"hidden"}),f=(0,a.iv)({height:"100%",left:0,position:"absolute",top:0,width:"100%",objectFit:"cover"});return(0,n.BX)(s.Fragment,{children:[d&&(0,n.tZ)(Ee,{width:e.width,height:e.height,onClose:()=>{p(!1)},data:e.data,startIndex:u.current,onImageRendered:e=>{var t;null===(t=o.current)||void 0===t||t.scrollToItem({rowIndex:Math.floor(e/3)})},onUserTagClick:t=>{e.onUserTagClick&&e.onUserTagClick(t)}}),(0,n.tZ)("div",Object.assign({css:h},{children:(0,n.tZ)(le.Ym,Object.assign({ref:o,columnCount:3,columnWidth:r,height:e.height-e.margin,rowCount:i,rowHeight:r,width:e.width,itemData:e.data,overscanRowCount:0,onScroll:({scrollTop:e})=>{l.current=e},onItemsRendered:({visibleRowStopIndex:t})=>{t===i-1&&e.onLastItemRenrered&&e.onLastItemRenrered()}},{children:({columnIndex:e,data:t,rowIndex:r,style:s})=>{const i=e+3*r;return(0,n.tZ)("div",Object.assign({style:s},{children:t[i]?(0,n.tZ)("img",{css:f,alt:t[i].id,src:t[i].media_url,onClick:()=>(e=>{u.current=e,p(!0)})(i)}):(0,n.tZ)("div",{})}))}}))}))]})})),Xe=(0,s.memo)(Pe),Me=e=>(0,n.BX)(M,Object.assign({style:{zIndex:3e3},open:e.open},{children:[(0,n.BX)(l,Object.assign({style:{position:"fixed",height:e.margin,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgb(33 86 139)"}},{children:[(0,n.tZ)(h,Object.assign({style:{color:"inherit",position:"absolute",left:"5px"},onClick:e.onClose},{children:(0,n.tZ)(w.Z,{})})),(0,n.tZ)(m,Object.assign({variant:"subtitle1"},{children:e.user.username})),(0,n.tZ)(h,Object.assign({style:{color:"inherit",position:"absolute",right:"5px"},onClick:async()=>{const t=!e.user.following;await e.toggleFollow(t,e.user)}},{children:e.user.following?(0,n.tZ)(Oe.Z,{}):(0,n.tZ)(je.Z,{})}))]})),(0,n.tZ)(Xe,{data:e.data,height:e.height,width:e.width,margin:e.margin,onLastItemRenrered:e.onLastItemRenrered})]}));var Fe=r(666),De=r(4020),Be=r(9485),Ue=r(9669),Ae=r.n(Ue);Error;class He extends Error{constructor(e,t){super(e),this.name="RequestError",this.data=t,Object.setPrototypeOf(this,He.prototype)}}const We={id:"",igId:"",username:"",name:"",profileImage:"",biography:"",following:!1},qe=(e,t,r)=>({method:t,url:e,headers:{"Content-Type":"application/json"},data:r,withCredentials:!0}),Ye=e=>"true"===e["ig-auth"],Ne=e=>{const t="true"===e.response.headers["ig-auth"];throw new He(e.response.data,{igAuth:t})},_e=async(e,t,r)=>{const n=qe("/querymore","POST",{user:e,next:t,preview:r});try{const e=await Ae().request(n);return{status:Ye(e.headers),data:e.data}}catch(e){return Ne(e)}},$e={isLoading:!1,openUsernameModal:!1,openImageModal:!1,openLoginModal:!1,openAccountModal:!1,openPreviewModal:!1,hasError:!1,errorMessage:""},Ve="start",Ge="end",Je="toggleUsernameModal",Ke="toggleLoginModal",Qe="toggleAccountModal",et="togglePreviewModal",tt="showError",rt="hideError",nt=(e,t)=>{switch(t.type){case Ve:return Object.assign(Object.assign({},e),{isLoading:!0});case Ge:return Object.assign(Object.assign({},e),{isLoading:!1});case Je:return Object.assign(Object.assign({},e),{openUsernameModal:t.value});case"toggleImageModal":return Object.assign(Object.assign({},e),{openImageModal:t.value});case Ke:return Object.assign(Object.assign({},e),{openLoginModal:t.value});case Qe:return Object.assign(Object.assign({},e),{openAccountModal:t.value});case et:return Object.assign(Object.assign({},e),{openPreviewModal:t.value});case tt:return Object.assign(Object.assign({},e),{hasError:!0,errorMessage:t.value});case rt:return Object.assign(Object.assign({},e),{hasError:!1,errorMessage:""});default:return e}},st={locked:!1,next:"",user:We,data:[],previewNext:"",previewUser:We,previewData:[],history:{},isFollowingsReady:!1,followings:{users:[],hasNext:!1,next:""},mediaScrollTop:0,followingScrollTop:0},it="update",at="append",ot="history",lt="followings",ct="updateFollowStatus",ut="toggleLock",dt="mediaScrollTop",pt="followingScrollTop",gt="preview",ht="resetPreview",ft=(e,t)=>{switch(t.type){case"reset":{const r=st;return r.user.username=t.value,Object.assign(Object.assign({},e),r)}case it:return Object.assign(Object.assign({},e),{user:t.value.user,data:t.value.media,next:t.value.next,history:t.value.history,mediaScrollTop:t.value.rowIndex});case at:return Object.assign(Object.assign({},e),{data:e.data.concat(t.value.media),next:t.value.next,mediaScrollTop:t.value.rowIndex});case ot:return Object.assign(Object.assign({},e),{history:t.value});case dt:return Object.assign(Object.assign({},e),{mediaScrollTop:t.value});case pt:return Object.assign(Object.assign({},e),{followingScrollTop:t.value});case ut:return Object.assign(Object.assign({},e),{locked:t.value});case lt:{let r;r=e.followings.users.length>0?e.followings.users.concat(t.value.users):t.value.users;const n={users:r,hasNext:t.value.hasNext,next:t.value.next};return Object.assign(Object.assign({},e),{isFollowingsReady:!0,followings:n})}case ct:{if(e.previewUser.username===t.value.user.username)return Object.assign(Object.assign({},e),{isFollowingsReady:!1,previewUser:Object.assign(Object.assign({},e.previewUser),{following:t.value.doFollow})});const r=e.followings.users.map((e=>(e.username===t.value.user.username&&(e.following=t.value.doFollow),e)));return Object.assign(Object.assign({},e),{followings:Object.assign(Object.assign({},e.followings),{users:r})})}case ht:return Object.assign(Object.assign({},e),{previewData:[],previewNext:"",previewUser:We});case gt:return e.previewUser.username===t.value.user.username?Object.assign(Object.assign({},e),{previewData:e.previewData.concat(t.value.media),previewNext:t.value.next}):Object.assign(Object.assign({},e),{previewUser:t.value.user,previewData:t.value.media,previewNext:t.value.next});default:return e}},bt={account:"",success:!1,challenge:!1,endpoint:""},mt="init",yt="update",vt="toggleAuth",xt=(e,t)=>{switch(t.type){case mt:{const r=bt;return r.account=t.value,Object.assign(Object.assign({},e),r)}case yt:return Object.assign(Object.assign({},e),t.value);case vt:return t.value.account?Object.assign(Object.assign({},e),{success:t.value.success,account:t.value.account}):Object.assign(Object.assign({},e),{success:t.value.success});default:return e}};i.render((0,n.tZ)(s.StrictMode,{children:(0,n.tZ)((function(){const{width:e,height:t}=(()=>{const e=()=>{const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}},[t,r]=(0,s.useState)(e());return(0,s.useEffect)((()=>{const t=()=>{r(e())};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[]),t})(),r=(0,s.useRef)({}),[i,a]=(0,s.useReducer)(nt,$e),[o,c]=(0,s.useReducer)(ft,st),[u,d]=(0,s.useReducer)(xt,bt),p=(0,s.useCallback)((async(e,t="")=>{if(d({type:vt,value:{success:e.data.igAuth}}),!e.data.igAuth)return z();a(t?{type:tt,value:t}:{type:tt,value:e.message})}),[]),g=(0,s.useCallback)((async e=>{o.mediaScrollTop!==e&&(await(async(e,t)=>{const r=qe("/save","POST",{username:e,rowIndex:t});try{await Ae().request(r)}catch(e){return Ne(e)}})(o.user.username,e),c({type:dt,value:e}))}),[o.mediaScrollTop,o.user.username]),f=(0,s.useCallback)((async({username:e,history:t,refresh:n=!1,preview:s=!1})=>{var i;a({type:Ve});try{const o=await(async(e,t,r,n)=>{const s=qe("/query","POST",{username:e,history:t,refresh:r,preview:n});try{const e=await Ae().request(s);return{status:Ye(e.headers),data:e.data}}catch(e){return Ne(e)}})(e,t,n,s);d({type:vt,value:{success:o.status,account:o.data.account}}),s?c({type:gt,value:o.data}):(c({type:it,value:o.data}),null===(i=r.current)||void 0===i||i.scrollTo(o.data.rowIndex))}catch(e){p(e)}finally{a({type:Ge})}}),[p]),b=(0,s.useCallback)((async()=>{if(!o.locked&&o.next)try{c({type:ut,value:!0});const e=await _e(o.user,o.next,!1);d({type:vt,value:{success:e.status}}),c({type:at,value:e.data})}catch(e){p(e)}finally{c({type:ut,value:!1})}}),[p,o.locked,o.next,o.user]),y=(0,s.useCallback)((async()=>{if(!o.locked&&o.previewNext)try{c({type:ut,value:!0});const e=await _e(o.previewUser,o.previewNext,!0);d({type:vt,value:{success:e.status}}),c({type:gt,value:e.data})}catch(e){p(e)}finally{c({type:ut,value:!1})}}),[p,o.locked,o.previewUser,o.previewNext]),x=(0,s.useCallback)((async(e,t)=>{a({type:Ve});try{await(async(e,t,r)=>{const n=qe("/remove","POST",{history:e,current:t,target:r});try{await Ae().request(n)}catch(e){return Ne(e)}})(e,o.user.username,t)}catch(e){p(e,"Update history failed")}finally{a({type:Ge})}}),[p,o.user.username]),w=(0,s.useCallback)((async(e,t)=>{a({type:Ve});try{d({type:mt,value:e});const r=await(async(e,t)=>{const r=qe("/login","POST",{account:e,password:t});try{return(await Ae().request(r)).data}catch(e){return Ne(e)}})(e,t);d({type:yt,value:r.status}),r.status.challenge||(c({type:it,value:r.media}),a({type:Ke,value:!r.status.success}))}catch(e){p(e,"Login attempt failed")}finally{a({type:Ge})}}),[p]),O=(0,s.useCallback)((async e=>{a({type:Ve});try{const t=await(async(e,t,r)=>{const n=qe("/challenge","POST",{account:e,code:t,endpoint:r});try{return(await Ae().request(n)).data}catch(e){return Ne(e)}})(u.account,e,u.endpoint);d({type:yt,value:t.status}),t.status.challenge||(c({type:it,value:t.media}),a({type:Ke,value:!t.status.success}))}catch(e){p(e,"Verification failed")}finally{a({type:Ge})}}),[p,u.account,u.endpoint]),j=(0,s.useCallback)((async()=>{try{c({type:ut,value:!0});const e=await(async e=>{const t=qe("/following","POST",{next:e});try{const e=await Ae().request(t);return{status:Ye(e.headers),data:e.data}}catch(e){return Ne(e)}})(o.followings.next);d({type:vt,value:{success:e.status}}),c({type:lt,value:e.data})}catch(e){p(e)}finally{c({type:ut,value:!1})}}),[p,o.followings.next]),C=(0,s.useCallback)((async()=>{!o.locked&&o.followings.hasNext&&await j()}),[o.locked,o.followings.hasNext,j]),k=(0,s.useCallback)((e=>{c({type:pt,value:e}),a({type:Qe,value:!1})}),[]),S=(0,s.useCallback)((async e=>{await f({username:e,history:o.history})}),[f,o.history]),I=(0,s.useCallback)((async()=>{if(!window.confirm("Are you sure to logout?"))return!1;a({type:Ve});try{const e=await(async()=>{const e=qe("/logout","POST",{});try{return(await Ae().request(e)).data}catch(e){return Ne(e)}})();return d({type:mt,value:""}),c({type:it,value:e.media}),!0}catch(e){return p(e,"Logout attempt failed"),!1}finally{a({type:Ge})}}),[p]),R=(0,s.useCallback)((async()=>{window.confirm("Refresh?")&&await f({username:o.user.username,history:o.history,refresh:!0})}),[f,o.user.username,o.history]),T=(0,s.useCallback)((async(e,t)=>{a({type:Ve});try{return e?await(async e=>{const t=qe("/follow","POST",{user:e});try{return await Ae().request(t)}catch(e){return Ne(e)}})(t):await(async e=>{const t=qe("/unfollow","POST",{user:e});try{return await Ae().request(t)}catch(e){return Ne(e)}})(t),c({type:ct,value:{doFollow:e,user:t}}),!0}catch(e){return p(e,"Follow/Unfollow failed"),!1}finally{a({type:Ge})}}),[p]),z=()=>{a({type:Ke,value:!0})},E=(0,s.useCallback)((async e=>{await f({username:e.username,history:o.history,preview:!0}),a({type:et,value:!0})}),[f,o.history]);return(0,s.useEffect)((()=>{f({username:"",history:{}})}),[f]),(0,n.BX)(s.Fragment,{children:[(0,n.tZ)(v,Object.assign({style:{color:"#fff",zIndex:9e3},open:i.isLoading},{children:(0,n.tZ)(L,{})})),i.openUsernameModal&&(0,n.tZ)(oe,{open:i.openUsernameModal,username:o.user.username,onSubmit:async(e,t)=>{a({type:Je,value:!1}),await f({username:e,history:t})},onClose:e=>{c({type:ot,value:e}),a({type:Je,value:!1})},onUsernameDelete:x,history:o.history}),i.openLoginModal&&(0,n.tZ)(we,{open:i.openLoginModal,onClose:()=>{a({type:Ke,value:!1})},onSubmit:w,onCodeSubmit:O,requireCode:u.challenge}),i.openAccountModal&&(0,n.tZ)(ye,{open:i.openAccountModal,account:u.account,data:o.followings,onUserSelect:S,onClose:k,height:t,width:e,onRequest:C,onLogout:I,toggleFollow:T,initialScrollTop:o.followingScrollTop}),i.openPreviewModal&&(0,n.tZ)(Me,{open:i.openPreviewModal,user:o.previewUser,data:o.previewData,height:t,width:e,margin:45,onClose:()=>{c({type:ht,value:null}),a({type:et,value:!1})},toggleFollow:T,onLastItemRenrered:y}),i.hasError&&(0,n.tZ)(Z,Object.assign({style:{zIndex:9e3},childStyle:{width:"100%"},open:i.hasError,autoHideDuration:3e3,onClose:()=>a({type:rt})},{children:i.errorMessage})),(0,n.BX)(l,Object.assign({style:{position:"fixed",height:45,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#fff"}},{children:[u.success?(0,n.tZ)(h,Object.assign({size:"small",style:{position:"absolute",left:"5px"},onClick:async()=>{o.isFollowingsReady||await j(),u.success&&a({type:Qe,value:!0})}},{children:(0,n.tZ)(De.Z,{})})):(0,n.tZ)(h,Object.assign({size:"small",style:{position:"absolute",left:"5px"},onClick:z},{children:(0,n.tZ)(Be.Z,{})})),(0,n.tZ)(h,Object.assign({size:"small",style:{position:"absolute",right:"5px"},onClick:R},{children:(0,n.tZ)(Fe.Z,{})})),(0,n.tZ)(h,Object.assign({style:{padding:0},type:"button",onClick:()=>{a({type:Je,value:!0})}},{children:(0,n.BX)("div",Object.assign({style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"}},{children:[(0,n.tZ)(Ce.Z,{sx:{color:"action.active",mr:1,my:.5}}),(0,n.tZ)(m,Object.assign({variant:"subtitle1",style:{flexGrow:1,color:"#888"}},{children:o.user.username?o.user.username:"User not found"}))]}))}))]})),(0,n.tZ)(Xe,{ref:r,data:o.data,onIdle:g,onLastItemRenrered:b,onUserTagClick:E,height:t,width:e,margin:45})]})}),{})}),document.getElementById("root"))}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return n[e](r,r.exports,i),r.exports}i.m=n,e=[],i.O=(t,r,n,s)=>{if(!r){var a=1/0;for(u=0;u<e.length;u++){for(var[r,n,s]=e[u],o=!0,l=0;l<r.length;l++)(!1&s||a>=s)&&Object.keys(i.O).every((e=>i.O[e](r[l])))?r.splice(l--,1):(o=!1,s<a&&(a=s));if(o){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[r,n,s]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var s=Object.create(null);i.r(s);var a={};t=t||[null,r({}),r([]),r(r)];for(var o=2&n&&e;"object"==typeof o&&!~t.indexOf(o);o=r(o))Object.getOwnPropertyNames(o).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,i.d(s,a),s},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,r)=>{var n,s,[a,o,l]=r,c=0;if(a.some((t=>0!==e[t]))){for(n in o)i.o(o,n)&&(i.m[n]=o[n]);if(l)var u=l(i)}for(t&&t(r);c<a.length;c++)s=a[c],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(u)},r=self.webpackChunkinsview=self.webpackChunkinsview||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=i.O(void 0,[736],(()=>i(3639)));a=i.O(a)})();