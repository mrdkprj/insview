(()=>{"use strict";var e,t,r,n={3639:(e,t,r)=>{var n=r(5944),s=r(7294),i=r(3935),a=r(917);const o=(0,a.iv)({transition:"box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",boxShadow:"rgb(0 0 0 / 20%) 0px 2px 4px -1px, rgb(0 0 0 / 14%) 0px 4px 5px 0px, rgb(0 0 0 / 12%) 0px 1px 10px 0px",display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:"0",zIndex:"1100",top:"0px",left:"auto",right:"0px",backgroundColor:"rgb(25, 118, 210)",color:"rgb(255, 255, 255)",position:"relative"}),l=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);return(0,n.tZ)("header",Object.assign({css:o,style:t.style},{children:t.children}))},c=(0,a.iv)({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",backgroundColor:"transparent",outline:"0px",border:"0px",margin:"0px",cursor:"pointer",userSelect:"none",verticalAlign:"middle",appearance:"none",textDecoration:"none",textAlign:"center",flex:"0 0 auto",borderRadius:"50%",overflow:"visible",color:"rgba(0, 0, 0, 0.54)",transition:"background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",WebkitTapHighlightColor:"transparent",fontSize:"1.125rem"}),u=(0,a.iv)({padding:"5px"}),d=(0,a.iv)({padding:"8px"}),p=(0,a.iv)({margin:"0px 0px 0px -12px"}),g=(0,a.iv)({margin:"0px -3px 0px 0px"}),h=e=>{const t=[c];return e.css&&t.push(e.css),"small"===e.size&&t.push(u),"medium"===e.size&&t.push(d),"start"===e.edge&&t.push(p),"end"===e.edge&&t.push(g),(0,n.tZ)("button",Object.assign({css:t,style:e.style,onClick:t=>e.onClick?e.onClick(t):t},{children:e.children}))};const f=(0,a.iv)({margin:"0px",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"400",fontSize:"1rem",lineHeight:"1.75",letterSpacing:"0.00938em"}),b=(0,a.iv)({margin:"0px",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"500",fontSize:"1.25rem",lineHeight:"1.6",letterSpacing:"0.0075em"}),m=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);const r="subtitle1"===t.variant?f:b;return(0,n.tZ)("div",Object.assign({css:r,style:t.style},{children:t.children}))};const y=(0,a.iv)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",inset:"0px",backgroundColor:"rgba(0, 0, 0, 0.5)"}),v=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);const[r,i]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{i(t.open)}),[t.open]),r?(0,n.tZ)("div",Object.assign({css:y,style:t.style},{children:t.children})):null};var x=r(2141),w=r(594);const O=(0,a.iv)({position:"fixed",display:"flex",left:"8px",right:"8px",justifyContent:"center",alignItems:"center",top:"8px","@media(min-width: 600px)":{top:"24px",left:"50%",right:"auto",transform:"translateX(-50%)"}}),j=(0,a.iv)({transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",opacity:0,borderRadius:"4px",boxShadow:"rgb(0 0 0 / 20%) 0px 3px 5px -1px, rgb(0 0 0 / 14%) 0px 6px 10px 0px, rgb(0 0 0 / 12%) 0px 1px 18px 0px",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"500",fontSize:"0.875rem",lineHeight:"1.43",letterSpacing:"0.01071em",backgroundColor:"rgb(211, 47, 47)",display:"flex",padding:"6px 16px",color:"rgb(255, 255, 255)"}),C=(0,a.iv)({marginRight:"12px",padding:"7px 0px",display:"flex",fontSize:"22px",opacity:"0.9"}),Z=(0,a.iv)({padding:"8px 0px"}),k=(0,a.iv)({display:"flex",alignItems:"flex-start",padding:"4px 0px 0px 16px",marginLeft:"auto",marginRight:"-8px"}),S=e=>{const t=(0,s.useRef)(0),r=(0,s.useRef)(0),i=(0,s.useRef)(0),a=(0,s.createRef)(),[o,l]=(0,s.useState)(e.open),c=(0,s.useCallback)((()=>{clearTimeout(r.current),clearTimeout(i.current),i.current=window.setTimeout((()=>{a.current&&(a.current.style.opacity="",a.current.style.transform="scale(0)")}),200)}),[a]),u=(0,s.useCallback)((()=>{clearTimeout(t.current),t.current=window.setTimeout((()=>{a.current&&(a.current.style.opacity="1",a.current.style.transform="none")}),250)}),[a]),d=(0,s.useCallback)((()=>{clearTimeout(r.current),r.current=window.setTimeout((()=>{c()}),e.autoHideDuration)}),[c,e.autoHideDuration]);return(0,s.useEffect)((()=>{l(e.open)}),[e.open]),(0,s.useEffect)((()=>{console.log("ef"),o&&(u(),d())}),[o,u,d]),(0,s.useEffect)((()=>()=>c()),[c]),o?(0,n.tZ)("div",Object.assign({css:O,style:e.style},{children:(0,n.BX)("div",Object.assign({css:j,style:e.childStyle,ref:a},{children:[(0,n.tZ)("div",Object.assign({css:C},{children:(0,n.tZ)(x.Z,{fontSize:"inherit",color:"inherit"})})),(0,n.tZ)("div",Object.assign({css:Z},{children:e.children})),(0,n.tZ)("div",Object.assign({css:k},{children:(0,n.tZ)(h,Object.assign({size:"small",onClick:e.onClose,style:{color:"inherit"}},{children:(0,n.tZ)(w.Z,{fontSize:"small",color:"inherit"})}))}))]}))})):null},I=(0,a.F4)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),R=(0,a.iv)({display:"inline-block",width:"40px",height:"40px",animation:`1.4s linear 0s infinite normal none running ${I}`}),T=(0,a.F4)({"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:0},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}}),z=(0,a.iv)({stroke:"currentcolor",strokeDasharray:"80px, 200px",strokeDashoffset:"0",animation:`1.4s ease-in-out 0s infinite normal none running ${T}`}),E=()=>(0,n.tZ)("span",Object.assign({css:R},{children:(0,n.tZ)("svg",Object.assign({viewBox:"22 22 44 44"},{children:(0,n.tZ)("circle",{css:z,cx:"44",cy:"44",r:"20.2",fill:"none",strokeWidth:"3.6"})}))})),L=(0,a.iv)({position:"fixed",inset:0}),P=(0,a.iv)({display:"flex",alignItems:"center",justifyContent:"center",outline:"0px",height:"100%",opacity:0,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"}),X=(0,a.iv)({backgroundColor:"rgb(255, 255, 255)",color:"rgba(0, 0, 0, 0.87)",transition:"box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",boxShadow:"rgb(0 0 0 / 20%) 0px 11px 15px -7px, rgb(0 0 0 / 14%) 0px 24px 38px 3px, rgb(0 0 0 / 12%) 0px 9px 46px 8px",margin:"0px",position:"relative",overflowY:"auto",display:"flex",flexDirection:"column",maxHeight:"none",maxWidth:"100%",width:"100%",height:"100%",borderRadius:"0px"}),M=e=>{const t=(0,s.useRef)(0),r=(0,s.useRef)(null),[i,a]=(0,s.useState)(e.open),o=(0,s.useCallback)((()=>{r.current&&(r.current.style.opacity="1")}),[]),l=(0,s.useCallback)((()=>{r.current&&(r.current.style.opacity="0.8",clearTimeout(t.current),t.current=window.setTimeout((()=>{r.current&&(r.current.style.opacity="0")}),200))}),[]);return(0,s.useEffect)((()=>{a(e.open)}),[e.open]),(0,s.useEffect)((()=>{i&&o()}),[i,o]),(0,s.useEffect)((()=>()=>l()),[l]),i?(0,n.tZ)("div",Object.assign({css:L,style:e.style},{children:(0,n.tZ)("div",Object.assign({css:P,ref:r},{children:(0,n.tZ)("div",Object.assign({css:X},{children:e.children}))}))})):null};const F=(0,a.iv)({listStyle:"none",margin:0,padding:"8px 0px",position:"relative"}),D=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);return(0,n.tZ)("ul",Object.assign({css:F},{children:t.children}))};const B=(0,a.iv)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",padding:"8px 16px",borderBottom:"1px solid rgba(0, 0, 0, 0.12)",backgroundClip:"padding-box",fontSize:"14px"}),A=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);return(0,n.tZ)("li",Object.assign({css:B,onClick:t.onClick},{children:t.children}))};const H=(0,a.iv)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:"0",width:"40px",height:"40px",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontSize:"1.25rem",lineHeight:"1",borderRadius:"50%",overflow:"hidden",userSelect:"none"}),U=(0,a.iv)({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:"10000px"}),W=(0,a.iv)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:"0",width:"40px",height:"40px",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontSize:"1.25rem",lineHeight:"1",borderRadius:"50%",overflow:"hidden",userSelect:"none",color:"rgb(255, 255, 255)",backgroundColor:"rgb(189, 189, 189)"}),q=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);const[r,i]=(0,s.useState)(!0);return(0,n.tZ)("div",Object.assign({css:H,style:t.style},{children:r?(0,n.tZ)("img",{css:U,src:t.src,alt:t.alt,onError:()=>{i(!1)}}):(0,n.tZ)("div",Object.assign({css:W},{children:(a=t.alt,a?a.charAt(0):"a")}))}));var a},N=(0,s.forwardRef)(((e,t)=>(0,n.tZ)("div",Object.assign({css:Y,style:e.style,ref:t},{children:e.children})))),Y=(0,a.iv)({flex:"1 1 auto",overflowY:"auto",padding:"20px 24px"}),_=N;const $=(0,a.iv)({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",backgroundColor:"transparent",outline:"0px",border:"0px",margin:"0px",cursor:"pointer",userSelect:"none",verticalAlign:"middle",appearance:"none",textDecoration:"none",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"500",fontSize:"0.875rem",lineHeight:"1.75",letterSpacing:"0.02857em",textTransform:"uppercase",minWidth:"64px",padding:"6px 8px",borderRadius:"4px",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",color:"rgb(25, 118, 210)"}),V=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);return(0,n.tZ)("button",Object.assign({type:"button",onClick:t.onClick,css:$},{children:t.children}))},G=(0,a.iv)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:"0px",padding:"0px",margin:"8px 0px 4px",border:"0px",verticalAlign:"top",width:"100%"}),J=(0,a.iv)({color:"rgba(0, 0, 0, 0.6)",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"400",fontSize:"1rem",lineHeight:"1.4375em",letterSpacing:"0.00938em",padding:"0px",display:"block",transformOrigin:"left top",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"133%",position:"absolute",left:"0px",top:"0px",transform:"translate(0px, -1.5px) scale(0.75)",transition:"color 200ms cubic-bezier(0, 0, 0.2, 1) 0ms, transform 200ms cubic-bezier(0, 0, 0.2, 1) 0ms, max-width 200ms cubic-bezier(0, 0, 0.2, 1) 0ms",".empty &":{maxWidth:"100%",transform:"translate(0px, 20px) scale(1)"},".has-focus &":{color:"rgba(25,118,210)"},".has-error &":{color:"rgb(211, 47, 47)"}}),K=(0,a.iv)({fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"400",fontSize:"1rem",lineHeight:"1.4375em",letterSpacing:"0.00938em",color:"rgba(0, 0, 0, 0.87)",boxSizing:"border-box",cursor:"text",display:"inline-flex",alignItems:"center",width:"100%",position:"relative",marginTop:"16px","&:before":{borderBottom:"1px solid rgba(0, 0, 0, 0.42)",left:"0px",bottom:"0px",content:'""',position:"absolute",right:"0px",transition:"border-bottom-color 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",pointerEvents:"none"},"&:after":{borderBottom:"2px solid rgb(25, 118, 210)",left:"0px",bottom:"0px",content:'""',position:"absolute",right:"0px",transform:"scaleX(0)",transition:"transform 200ms cubic-bezier(0, 0, 0.2, 1) 0ms",pointerEvents:"none"},".has-focus &:after":{transform:"scaleX(1)"},".has-error &:after":{borderBottomColor:"rgb(211, 47, 47)",transform:"scaleX(1)"}}),Q=(0,a.F4)({from:{display:"block"},label:"autoFillCancel"}),ee=(0,a.F4)({from:{display:"block"},label:"autoFill"}),te=(0,a.iv)({font:"inherit",letterSpacing:"inherit",color:"currentcolor",padding:"4px 0px 5px",border:"0px",boxSizing:"content-box",background:"none",height:"1.4375em",margin:"0px",display:"block",minWidth:"0px",width:"100%",WebkitTapHighlightColor:"transparent",animationName:`${Q}`,animationDuration:"10ms","&:focus":{outline:"0px"},"&:-webkit-autofill":{animationDuration:"5000s",animationName:`${ee}`}}),re=(0,a.iv)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:"rgba(0, 0, 0, 0.54)",marginLeft:"8px"}),ne=(0,a.iv)({color:"rgba(0, 0, 0, 0.6)",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"400",fontSize:"0.75rem",lineHeight:"1.66",letterSpacing:"0.03333em",textAlign:"left",margin:"3px 0px 0px",".has-error &":{color:"rgb(211, 47, 47)"}}),se=e=>{var t;const r=(0,s.createRef)(),i=e.inputRef?e.inputRef:(0,s.createRef)(),a=(0,s.useCallback)((e=>{var t,n;e||document.activeElement===i.current?null===(t=r.current)||void 0===t||t.classList.remove("empty"):null===(n=r.current)||void 0===n||n.classList.add("empty")}),[r,i]);return(0,s.useEffect)((()=>{var t,n;e.error?null===(t=r.current)||void 0===t||t.classList.add("has-error"):null===(n=r.current)||void 0===n||n.classList.remove("has-error")}),[r,e.error]),(0,s.useEffect)((()=>{a(e.value)}),[r,e.value,a]),(0,n.BX)("div",Object.assign({ref:r,css:G},{children:[(0,n.tZ)("label",Object.assign({css:J},{children:e.label})),(0,n.BX)("div",Object.assign({css:K},{children:[(0,n.tZ)("input",{type:e.type,autoComplete:!1===e.autoComplete?"new-password":"on",spellCheck:"false",value:e.value,css:te,ref:i,onFocus:()=>{var e,t;null===(e=r.current)||void 0===e||e.classList.add("has-focus"),null===(t=r.current)||void 0===t||t.classList.remove("empty")},onBlur:()=>{var e,t,n;null===(e=r.current)||void 0===e||e.classList.remove("has-focus"),(null===(t=i.current)||void 0===t?void 0:t.value)||null===(n=r.current)||void 0===n||n.classList.add("empty")},onChange:t=>{var r;a(null===(r=i.current)||void 0===r?void 0:r.value),e.onChange&&e.onChange(t)},onAnimationStart:e=>{var t;e.animationName.endsWith("autoFillCancel")?a(null===(t=i.current)||void 0===t?void 0:t.value):a("value")}}),null!==(t=e.endAdornment)&&void 0!==t?t:(0,n.tZ)("div",{css:re})]})),e.error&&(0,n.tZ)("p",Object.assign({css:ne},{children:e.helperText}))]}))};var ie=r(3343),ae=r(1733);const oe=e=>{const t=(0,s.createRef)(),r=(0,s.createRef)(),[i,a]=(0,s.useState)(!1),[o,c]=(0,s.useState)(e.username);(0,s.useEffect)((()=>{c(e.username)}),[e.username]);const[u,d]=(0,s.useState)({});(0,s.useEffect)((()=>{d(e.history)}),[e.history]);const p=()=>{e.onClose(u)};return(0,n.BX)(M,Object.assign({style:{zIndex:1300},open:e.open},{children:[(0,n.BX)(l,Object.assign({style:{height:"45px",display:"flex",justifyContent:"center",alignItems:"center"}},{children:[(0,n.tZ)(h,Object.assign({style:{color:"inherit",position:"absolute",left:"5px"},onClick:p},{children:(0,n.tZ)(w.Z,{})})),(0,n.tZ)(m,Object.assign({variant:"h6"},{children:"Search"}))]})),(0,n.BX)(_,Object.assign({style:{marginTop:"30px"},ref:t},{children:[(0,n.tZ)(se,{type:"text",error:i,label:"Username",value:o,autoFocus:!0,autoComplete:!1,onChange:e=>{c(e.target.value)},inputRef:r,endAdornment:(0,n.tZ)(h,Object.assign({size:"small",onClick:()=>{var e;c(""),null===(e=r.current)||void 0===e||e.focus()}},{children:(0,n.tZ)(ie.Z,{fontSize:"small"})})),helperText:i?"You should input username":""}),(0,n.BX)("div",Object.assign({style:{display:"flex",justifyContent:"center",marginTop:"30px"}},{children:[(0,n.tZ)(V,Object.assign({onClick:p},{children:"Cancel"})),(0,n.tZ)(V,Object.assign({onClick:()=>{o?(a(!1),e.onSubmit(o,u)):a(!0)}},{children:"Submit"}))]})),(0,n.tZ)("div",Object.assign({style:{marginTop:"30px"}},{children:(0,n.tZ)(D,{children:Object.keys(u).map((r=>{return s=r,e.open?(0,n.tZ)(A,Object.assign({onClick:()=>(c(s),void(t.current&&(t.current.scrollTop=0)))},{children:(0,n.BX)("div",Object.assign({style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"}},{children:[(0,n.tZ)(q,{alt:u[s].username,src:u[s].profileImage,style:{marginRight:"15px"}}),(0,n.BX)("div",Object.assign({style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"}},{children:[(0,n.tZ)("span",{children:u[s].name}),(0,n.tZ)("span",{children:u[s].username})]})),(0,n.tZ)(h,Object.assign({size:"small",edge:"end",onClick:t=>(async(t,r)=>{t.stopPropagation();const n=Object.assign({},u);delete n[r],await e.onUsernameDelete(n,r),d(n)})(t,s)},{children:(0,n.tZ)(ae.Z,{})}))]}))}),s):null;var s}))})}))]}))]}))};var le=r(7622),ce=r(3540);const ue=(0,s.memo)((e=>{const t=e.data.users.length-1,r=(0,s.useRef)(0),i=(0,s.useCallback)((async(t,r)=>{await e.toggleFollow(!r.following,r)}),[e]),a=()=>{e.onClose(r.current)};return(0,n.BX)(M,Object.assign({style:{zIndex:1300,overflowX:"hidden"},open:e.open},{children:[(0,n.BX)(l,Object.assign({style:{height:45,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#fff"}},{children:[(0,n.tZ)(h,Object.assign({size:"small",style:{position:"absolute",left:"5px"},onClick:a},{children:(0,n.tZ)(w.Z,{})})),(0,n.tZ)(m,Object.assign({style:{color:"#888"},variant:"h6"},{children:e.account})),(0,n.tZ)(h,Object.assign({size:"small",style:{position:"absolute",right:"5px"},onClick:async()=>{await e.onLogout()&&a()}},{children:(0,n.tZ)(ce.Z,{})}))]})),(0,n.tZ)(_,Object.assign({style:{overflow:"hidden",padding:0}},{children:(0,n.tZ)(le.t7,Object.assign({style:{overflowX:"hidden"},height:e.height-45,itemCount:t,itemSize:60,width:e.width,itemData:e.data.users,onScroll:({scrollOffset:e})=>{r.current=e},initialScrollOffset:e.initialScrollTop,onItemsRendered:({visibleStopIndex:r})=>{r===t-1&&e.data.next&&e.onRequest()}},{children:({index:t,data:r,style:s})=>(0,n.BX)("div",Object.assign({css:de,style:s},{children:[(0,n.tZ)(q,{alt:r[t].profileImage,src:r[t].profileImage,style:{marginRight:"15px",marginLeft:"24px"}}),(0,n.BX)("div",Object.assign({css:pe,onClick:()=>{return n=r[t].username,a(),void e.onUserSelect(n);var n}},{children:[(0,n.tZ)("div",Object.assign({css:ge},{children:r[t].name})),(0,n.tZ)("div",Object.assign({css:ge},{children:r[t].username}))]})),r[t].following?(0,n.tZ)("button",Object.assign({css:he,onClick:e=>i(e,r[t])},{children:"Unfollow"})):(0,n.tZ)("button",Object.assign({css:fe,onClick:e=>i(e,r[t])},{children:"Follow"}))]}))}))}))]}))})),de=(0,a.iv)({display:"flex",alignItems:"center",flex:1}),pe=(0,a.iv)({display:"flex",flexDirection:"column",flex:"1 1 auto"}),ge=(0,a.iv)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"14px",width:"200px"}),he=(0,a.iv)({padding:"5px 9px",borderRadius:"4px",fontSize:"14px",backgroundColor:"rgb(255, 255, 255)",color:"rgb(0, 0, 0)",border:"1px solid #ccc",marginRight:"20px"}),fe=(0,a.iv)({padding:"5px 9px",borderRadius:"4px",fontSize:"14px",backgroundColor:"rgb(25, 118, 210)",color:"rgb(255, 255, 255)",border:"1px solid #ccc",marginRight:"20px"}),be=ue;var me=r(8557),ye=r(5671);const ve="You should input username/password",xe=e=>{const[t,r]=(0,s.useState)(!1),[i,a]=(0,s.useState)(!1),[o,c]=(0,s.useState)(e.requireCode),[u,d]=(0,s.useState)(""),[p,g]=(0,s.useState)(""),[f,b]=(0,s.useState)("");return(0,s.useEffect)((()=>{c(e.requireCode)}),[e.requireCode]),(0,n.BX)(M,Object.assign({style:{zIndex:1300},open:e.open},{children:[(0,n.BX)(l,Object.assign({style:{height:"45px",display:"flex",justifyContent:"center",alignItems:"center"}},{children:[(0,n.tZ)(h,Object.assign({style:{color:"inherit",position:"absolute",left:"5px"},onClick:e.onClose},{children:(0,n.tZ)(w.Z,{})})),(0,n.tZ)(m,Object.assign({variant:"h6"},{children:"Authenticate"})),(0,n.tZ)(h,Object.assign({style:{color:"inherit",position:"absolute",right:"5px"},onClick:()=>{c(!o)}},{children:o?(0,n.tZ)(me.Z,{}):(0,n.tZ)(ye.Z,{})}))]})),(0,n.tZ)(_,Object.assign({style:{marginTop:"30px"}},{children:o?(0,n.BX)("div",{children:[(0,n.tZ)(se,{type:"number",error:t,label:"Code",value:f,autoFocus:!0,autoComplete:!1,onChange:e=>{b(e.target.value)},helperText:i?"You should input code":""}),(0,n.tZ)("div",Object.assign({style:{display:"flex",justifyContent:"center",marginTop:"30px"}},{children:(0,n.tZ)(V,Object.assign({onClick:()=>{f?(a(!1),e.onCodeSubmit(f)):a(!0)}},{children:"Verify"}))}))]}):(0,n.BX)("div",{children:[(0,n.tZ)(se,{type:"text",error:t,label:"Username",value:u,autoFocus:!0,autoComplete:!0,onChange:e=>{d(e.target.value)},helperText:t?ve:""}),(0,n.tZ)(se,{type:"password",error:t,label:"Password",value:p,autoFocus:!0,autoComplete:!0,onChange:e=>{g(e.target.value)},helperText:t?ve:""}),(0,n.BX)("div",Object.assign({style:{display:"flex",justifyContent:"center",marginTop:"30px"}},{children:[(0,n.tZ)(V,Object.assign({onClick:e.onClose},{children:"Cancel"})),(0,n.tZ)(V,Object.assign({onClick:()=>{u&&p?(r(!1),e.onSubmit(u,p)):r(!0)}},{children:"Login"}))]}))]})}))]}))};var we=r(6111),Oe=r(1811),je=r(4833),Ce=r(8201),Ze=r(6043);const ke={startX:0,startY:0,startTime:0,moveY:0,moveX:0,isMoved:!1,swiping:!1,close:!1,direction:"",left:0,degree:0},Se="right",Ie="left",Re=(0,a.iv)({display:"flex",justifyContent:"flex-start",alignItems:"center"}),Te=(0,a.iv)({maxHeight:"100%",maxWidth:"100%",transition:"transform 0.7s",willChange:"transform"}),ze=(0,a.iv)({maxHeight:"100%",width:"100%"}),Ee=(0,a.iv)({position:"fixed",top:0,left:0,overflow:"hidden",backgroundColor:"#2a2727d4",zIndex:2e3,height:"100%",width:"100%",userSelect:"none"}),Le=(0,a.iv)({position:"absolute",margin:0,padding:0,opacity:0,bottom:"3em",left:"10px",zIndex:2e3,width:"100%",height:"100%x",display:"flex",justifyContent:"flex-start",alignItems:"self-start",flexDirection:"column",transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","& div":{letterSpacing:"0.02857em",margin:"5px 5px 5px 0px",padding:"5px",color:"#fff",borderRadius:"5px",backgroundColor:"rgb(25, 118, 210)"},".tags &":{opacity:1}}),Pe=(0,a.iv)({position:"fixed",bottom:"5px",left:"5px",display:"none",".has-tags + &":{display:"inline-flex"}}),Xe=(0,s.memo)((e=>{const t=(0,s.useRef)(Object.assign({},ke)),r=(0,s.useRef)(null),i=(0,s.useRef)(!1),a=(0,s.useRef)(!1),o=(0,s.useRef)(0),l=(0,s.useRef)(0),c=(0,s.useRef)(null),u=(0,s.useRef)(null),d=(0,s.useRef)(null),p=()=>t.current.direction===Se||t.current.direction===Ie,g=(0,s.useCallback)((e=>{var r,n,s;t.current.startX=e.touches[0].clientX+(null===(r=u.current)||void 0===r?void 0:r.scrollLeft),t.current.startY=e.touches[0].clientY,t.current.startTime=(new Date).getTime(),t.current.swiping=!0,t.current.left=null!==(s=null===(n=u.current)||void 0===n?void 0:n.scrollLeft)&&void 0!==s?s:0,"VIDEO"===e.target.tagName?d.current=e.target:d.current=null}),[]),f=(0,s.useCallback)((()=>{t.current=Object.assign({},ke)}),[]),b=(0,s.useCallback)((()=>{f(),e.onClose()}),[f,e]),m=(0,s.useCallback)((()=>{var r;t.current.isMoved&&(new Date).getTime()-t.current.startTime<=150||t.current.degree>.6?(l.current=t.current.direction===Ie?t.current.left+e.width:t.current.left-e.width,null===(r=u.current)||void 0===r||r.scrollTo({left:l.current,behavior:"smooth"})):(l.current=t.current.left,u.current&&(u.current.scrollLeft=l.current)),setTimeout((()=>{u.current&&u.current.scrollLeft!==l.current&&(u.current.scrollLeft=l.current)}),150),f()}),[f,e.width]),y=(0,s.useCallback)((()=>{t.current.close||t.current.isMoved&&(new Date).getTime()-t.current.startTime<=150||t.current.degree>.3?b():(f(),u.current&&(u.current.style.transform="translate(0px, 0px)"))}),[b,f]),v=(0,s.useCallback)((()=>{t.current.swiping&&(p()?m():y())}),[y,m]),x=(0,s.useCallback)((()=>{var r;const n=(t.current.moveX-t.current.left)/e.width;t.current.degree=Math.abs(n),t.current.isMoved=t.current.degree>0,null===(r=u.current)||void 0===r||r.scrollTo({left:t.current.moveX}),t.current.degree>.6&&m()}),[m,e.width]),w=(0,s.useCallback)((()=>{t.current.degree=Math.abs(t.current.moveY)/e.height,t.current.isMoved=t.current.degree>0,t.current.degree>.3&&(t.current.close=!0),u.current&&(u.current.style.transform=`translate(0px, ${-t.current.moveY}px)`)}),[e.height]),O=(0,s.useCallback)((e=>{if(!t.current.swiping||a.current)return;k(),S();const r=t.current.startX-e.touches[0].clientX,n=t.current.startY-e.touches[0].clientY;t.current.direction||(t.current.direction=((e,t)=>Math.abs(e)>Math.abs(t)?e>0?Ie:Se:t>0?"up":"down")(r-t.current.left,n)),t.current.moveY=n,t.current.moveX=r,p()?x():w()}),[x,w]),j=(0,s.useCallback)((e=>{if(!u.current)return;const t=e.currentTarget;if(r.current=t.getBoundingClientRect(),a.current)f(),t.style.transform="scale(1)",a.current=!1;else{const n=e.pageX-r.current.left;let s=e.pageY-r.current.top;const i=r.current.top-2*s,o=r.current.top+3*r.current.height-2*s;i>0?s=r.current.top/2:o<window.screen.height&&(s=r.current.height-r.current.top/2),t.style.transformOrigin=`${n}px ${s}px`,t.style.transform="scale(3)",a.current=!0}}),[f]),C=(0,s.useCallback)((e=>{if(!i.current)return i.current=!0,void(o.current=window.setTimeout((()=>{i.current=!1}),300));clearTimeout(o.current),i.current=!1,S(),j(e)}),[j]),Z=(0,s.useCallback)((e=>{"Escape"===e.key&&b()}),[b]),k=()=>{d.current&&d.current.pause()},S=()=>{u.current&&u.current.classList.contains("tags")&&u.current.classList.remove("tags")};return(0,s.useEffect)((()=>{var e,t,r;return document.body.style.overflow="hidden",null===(e=u.current)||void 0===e||e.addEventListener("touchstart",g,{passive:!0}),null===(t=u.current)||void 0===t||t.addEventListener("touchmove",O,{passive:!0}),null===(r=u.current)||void 0===r||r.addEventListener("touchend",v,{passive:!0}),document.addEventListener("keydown",Z),()=>{document.removeEventListener("keydown",Z)}}),[g,O,v,Z]),(0,s.useEffect)((()=>()=>{document.body.style.overflow=""}),[]),(0,n.BX)("div",Object.assign({css:Ee,ref:c},{children:[(0,n.tZ)(le.t7,Object.assign({height:e.height,itemCount:e.data.length,itemSize:e.width,width:e.width,layout:"horizontal",overscanCount:4,outerRef:u,itemData:e.data,initialScrollOffset:e.width*(1*e.startIndex),style:{overflow:"hidden",background:"#121111",WebkitTransform:"translateZ(0px)"},onItemsRendered:({visibleStartIndex:r})=>{t.current.swiping||(e.onImageRendered(r),u.current&&(e.data[r].taggedUsers.length>0?u.current.classList.add("has-tags"):u.current.classList.remove("has-tags")))}},{children:({index:t,style:r})=>{const s=e.data[t].taggedUsers?e.data[t].taggedUsers:[];return(0,n.BX)("div",Object.assign({style:r,css:Re},{children:[(0,n.tZ)("div",Object.assign({css:Le},{children:s.map((t=>(0,n.tZ)("div",Object.assign({onClick:()=>(t=>{e.onUserTagClick(t)})(t)},{children:t.username}),t.id)))})),e.data[t].isVideo&&(0,n.tZ)("div",Object.assign({style:{position:"absolute",width:"100%",top:"5px"}},{children:(0,n.tZ)("a",Object.assign({href:`/video?url=${encodeURIComponent(e.data[t].media_url)}&id=${e.data[t].id}`,download:!0,style:{color:"#ccc",width:"100%",height:"100%",display:"flex",justifyContent:"flex-end"}},{children:(0,n.tZ)(Ze.Z,{color:"inherit",style:{marginRight:"5px"}})}))})),e.data[t].isVideo?(0,n.tZ)("video",{css:ze,src:e.data[t].media_url,controls:!0,muted:!0,playsInline:!0,preload:"none",poster:e.data[t].thumbnail_url}):(0,n.tZ)("img",{css:Te,alt:e.data[t].id,src:e.data[t].media_url,onClick:C})]}))}})),(0,n.tZ)("span",Object.assign({css:Pe},{children:(0,n.tZ)(h,Object.assign({onClick:()=>{u.current&&(u.current.classList.contains("tags")?S():u.current.classList.add("tags"))}},{children:(0,n.tZ)(Ce.Z,{sx:{color:"rgb(135 129 129)",mr:1,my:.5}})}))}))]}))})),Me=(0,s.forwardRef)(((e,t)=>{const r=e.width/3,i=Math.ceil(e.data.length/3),o=(0,s.createRef)(),l=(0,s.useRef)(0),c=(0,s.useRef)(0),u=(0,s.useRef)(0),[d,p]=(0,s.useState)(!1);(0,s.useImperativeHandle)(t,(()=>({scrollTo:e=>{var t;null===(t=o.current)||void 0===t||t.scrollToItem({align:"start",columnIndex:0,rowIndex:e})}})));const g=(0,s.useCallback)((()=>{i<=0||(l.current===c.current?e.onIdle&&e.onIdle(l.current):c.current=l.current)}),[e,i]);(0,s.useEffect)((()=>{const e=setInterval(g,1e4);return()=>clearInterval(e)}),[g]);const h=(0,a.iv)({display:"flex",justifyContent:"center",alignItems:"center",flex:1,marginTop:`${e.margin}px`,overflowY:"auto",overflowX:"hidden"}),f=(0,a.iv)({height:"100%",left:0,position:"absolute",top:0,width:"100%",objectFit:"cover"});return(0,n.BX)(s.Fragment,{children:[d&&(0,n.tZ)(Xe,{width:e.width,height:e.height,onClose:()=>{p(!1)},data:e.data,startIndex:u.current,onImageRendered:e=>{var t;null===(t=o.current)||void 0===t||t.scrollToItem({rowIndex:Math.floor(e/3)})},onUserTagClick:t=>{e.onUserTagClick&&e.onUserTagClick(t)}}),(0,n.tZ)("div",Object.assign({css:h},{children:(0,n.tZ)(le.Ym,Object.assign({ref:o,columnCount:3,columnWidth:r,height:e.height-e.margin,rowCount:i,rowHeight:r,width:e.width,itemData:e.data,overscanRowCount:0,onItemsRendered:({visibleRowStartIndex:t,visibleRowStopIndex:r})=>{r===i-1&&e.onLastItemRenrered&&e.onLastItemRenrered(),l.current=t}},{children:({columnIndex:e,data:t,rowIndex:r,style:s})=>{const i=e+3*r;return(0,n.BX)("div",Object.assign({style:s},{children:[t[i]?(0,n.tZ)("img",{css:f,alt:t[i].id,src:t[i].thumbnail_url?t[i].thumbnail_url:t[i].media_url,onClick:()=>(e=>{u.current=e,p(!0)})(i)}):(0,n.tZ)("div",{}),t[i]&&t[i].isVideo&&(0,n.tZ)(je.Z,{fontSize:"small",style:{position:"absolute",right:"5px",color:"rgba(255,255,255)"}})]}))}}))}))]})})),Fe=(0,s.memo)(Me),De=e=>(0,n.BX)(M,Object.assign({style:{zIndex:3e3},open:e.open},{children:[(0,n.BX)(l,Object.assign({style:{position:"fixed",height:e.margin,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgb(33 86 139)"}},{children:[(0,n.tZ)(h,Object.assign({style:{color:"inherit",position:"absolute",left:"5px"},onClick:e.onClose},{children:(0,n.tZ)(w.Z,{})})),(0,n.tZ)(m,Object.assign({variant:"subtitle1"},{children:e.user.username})),(0,n.tZ)(h,Object.assign({style:{color:"inherit",position:"absolute",right:"5px"},onClick:async()=>{const t=!e.user.following;await e.toggleFollow(t,e.user)}},{children:e.user.following?(0,n.tZ)(we.Z,{}):(0,n.tZ)(Oe.Z,{})}))]})),(0,n.tZ)(Fe,{data:e.data,height:e.height,width:e.width,margin:e.margin,onLastItemRenrered:e.onLastItemRenrered})]}));var Be=r(666),Ae=r(4020),He=r(9485),Ue=r(6040),We=r(9669),qe=r.n(We);Error;class Ne extends Error{constructor(e,t){super(e),this.name="RequestError",this.data=t,Object.setPrototypeOf(this,Ne.prototype)}}const Ye={id:"",igId:"",isPro:!1,username:"",name:"",profileImage:"",biography:"",following:!1},_e=(e,t,r)=>({method:t,url:e,headers:{"Content-Type":"application/json"},data:r,withCredentials:!0}),$e=e=>"true"===e["ig-auth"],Ve=e=>{const t="true"===e.response.headers["ig-auth"];throw new Ne(e.response.data,{igAuth:t})},Ge=async(e,t,r)=>{const n=_e("/querymore","POST",{user:e,next:t,preview:r});try{const e=await qe().request(n);return{status:$e(e.headers),data:e.data}}catch(e){return Ve(e)}},Je={isLoading:!1,openSearchModal:!1,openImageModal:!1,openLoginModal:!1,openAccountModal:!1,openPreviewModal:!1,hasError:!1,errorMessage:""},Ke="start",Qe="end",et="toggleSearchModal",tt="toggleLoginModal",rt="toggleAccountModal",nt="togglePreviewModal",st="showError",it="hideError",at=(e,t)=>{switch(t.type){case Ke:return Object.assign(Object.assign({},e),{isLoading:!0});case Qe:return Object.assign(Object.assign({},e),{isLoading:!1});case et:return Object.assign(Object.assign({},e),{openSearchModal:t.value});case"toggleImageModal":return Object.assign(Object.assign({},e),{openImageModal:t.value});case tt:return Object.assign(Object.assign({},e),{openLoginModal:t.value});case rt:return Object.assign(Object.assign({},e),{openAccountModal:t.value});case nt:return Object.assign(Object.assign({},e),{openPreviewModal:t.value});case st:return Object.assign(Object.assign({},e),{hasError:!0,errorMessage:t.value});case it:return Object.assign(Object.assign({},e),{hasError:!1,errorMessage:""});default:return e}},ot={locked:!1,next:"",user:Ye,data:[],previewNext:"",previewUser:Ye,previewData:[],history:{},isFollowingsReady:!1,followings:{users:[],hasNext:!1,next:""},mediaScrollTop:0,followingScrollTop:0},lt="update",ct="append",ut="history",dt="followings",pt="updateFollowStatus",gt="toggleLock",ht="mediaScrollTop",ft="followingScrollTop",bt="preview",mt="resetPreview",yt=(e,t)=>{switch(t.type){case"reset":{const r=ot;return r.user.username=t.value,Object.assign(Object.assign({},e),r)}case lt:return Object.assign(Object.assign({},e),{user:t.value.user,data:t.value.media,next:t.value.next,history:t.value.history,mediaScrollTop:t.value.rowIndex});case ct:return Object.assign(Object.assign({},e),{data:e.data.concat(t.value.media),next:t.value.next,mediaScrollTop:t.value.rowIndex});case ut:return Object.assign(Object.assign({},e),{history:t.value});case ht:return Object.assign(Object.assign({},e),{mediaScrollTop:t.value});case ft:return Object.assign(Object.assign({},e),{followingScrollTop:t.value});case gt:return Object.assign(Object.assign({},e),{locked:t.value});case dt:{let r;r=e.followings.users.length>0?e.followings.users.concat(t.value.users):t.value.users;const n={users:r,hasNext:t.value.hasNext,next:t.value.next};return Object.assign(Object.assign({},e),{isFollowingsReady:!0,followings:n})}case pt:{if(e.previewUser.username===t.value.user.username)return Object.assign(Object.assign({},e),{isFollowingsReady:!1,previewUser:Object.assign(Object.assign({},e.previewUser),{following:t.value.doFollow})});const r=e.followings.users.map((e=>(e.username===t.value.user.username&&(e.following=t.value.doFollow),e)));return Object.assign(Object.assign({},e),{followings:Object.assign(Object.assign({},e.followings),{users:r})})}case mt:return Object.assign(Object.assign({},e),{previewData:[],previewNext:"",previewUser:Ye});case bt:return e.previewUser.username===t.value.user.username?Object.assign(Object.assign({},e),{previewData:e.previewData.concat(t.value.media),previewNext:t.value.next}):Object.assign(Object.assign({},e),{previewUser:t.value.user,previewData:t.value.media,previewNext:t.value.next});default:return e}},vt={account:"",success:!1,challenge:!1,endpoint:""},xt="init",wt="update",Ot="toggleAuth",jt=(e,t)=>{switch(t.type){case xt:{const r=vt;return r.account=t.value,Object.assign(Object.assign({},e),r)}case wt:return Object.assign(Object.assign({},e),t.value);case Ot:return t.value.account?Object.assign(Object.assign({},e),{success:t.value.success,account:t.value.account}):Object.assign(Object.assign({},e),{success:t.value.success});default:return e}};i.render((0,n.tZ)(s.StrictMode,{children:(0,n.tZ)((function(){const{width:e,height:t}=(()=>{const e=()=>{const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}},[t,r]=(0,s.useState)(e());return(0,s.useEffect)((()=>{const t=()=>{r(e())};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[]),t})(),r=(0,s.useRef)({}),[i,a]=(0,s.useReducer)(at,Je),[o,c]=(0,s.useReducer)(yt,ot),[u,d]=(0,s.useReducer)(jt,vt),p=(0,s.useCallback)((async(e,t="")=>{if(d({type:Ot,value:{success:e.data.igAuth}}),!e.data.igAuth)return z();a(t?{type:st,value:t}:{type:st,value:e.message})}),[]),g=(0,s.useCallback)((async e=>{o.mediaScrollTop!==e&&(await(async(e,t)=>{const r=_e("/save","POST",{username:e,rowIndex:t});try{await qe().request(r)}catch(e){return Ve(e)}})(o.user.username,e),c({type:ht,value:e}))}),[o.mediaScrollTop,o.user.username]),f=(0,s.useCallback)((async({username:e,history:t,reload:n=!1,preview:s=!1})=>{var i;a({type:Ke});try{const o=await(async(e,t,r,n)=>{const s=_e("/query","POST",{username:e,history:t,reload:r,preview:n});try{const e=await qe().request(s);return{status:$e(e.headers),data:e.data}}catch(e){return Ve(e)}})(e,t,n,s);d({type:Ot,value:{success:o.status,account:o.data.account}}),s?c({type:bt,value:o.data}):(c({type:lt,value:o.data}),null===(i=r.current)||void 0===i||i.scrollTo(o.data.rowIndex))}catch(e){p(e)}finally{a({type:Qe})}}),[p]),b=(0,s.useCallback)((async()=>{if(!o.locked&&o.next)try{c({type:gt,value:!0});const e=await Ge(o.user,o.next,!1);d({type:Ot,value:{success:e.status}}),c({type:ct,value:e.data})}catch(e){p(e)}finally{c({type:gt,value:!1})}}),[p,o.locked,o.next,o.user]),y=(0,s.useCallback)((async()=>{if(!o.locked&&o.previewNext)try{c({type:gt,value:!0});const e=await Ge(o.previewUser,o.previewNext,!0);d({type:Ot,value:{success:e.status}}),c({type:bt,value:e.data})}catch(e){p(e)}finally{c({type:gt,value:!1})}}),[p,o.locked,o.previewUser,o.previewNext]),x=(0,s.useCallback)((async(e,t)=>{a({type:Ke});try{await(async(e,t,r)=>{const n=_e("/remove","POST",{history:e,current:t,target:r});try{await qe().request(n)}catch(e){return Ve(e)}})(e,o.user.username,t)}catch(e){p(e,"Update history failed")}finally{a({type:Qe})}}),[p,o.user.username]),w=(0,s.useCallback)((async(e,t)=>{a({type:Ke});try{d({type:xt,value:e});const r=await(async(e,t)=>{const r=_e("/login","POST",{account:e,password:t});try{return(await qe().request(r)).data}catch(e){return Ve(e)}})(e,t);d({type:wt,value:r.status}),r.status.challenge||(c({type:lt,value:r.media}),a({type:tt,value:!r.status.success}))}catch(e){p(e,"Login attempt failed")}finally{a({type:Qe})}}),[p]),O=(0,s.useCallback)((async e=>{a({type:Ke});try{const t=await(async(e,t,r)=>{const n=_e("/challenge","POST",{account:e,code:t,endpoint:r});try{return(await qe().request(n)).data}catch(e){return Ve(e)}})(u.account,e,u.endpoint);d({type:wt,value:t.status}),t.status.challenge||(c({type:lt,value:t.media}),a({type:tt,value:!t.status.success}))}catch(e){p(e,"Verification failed")}finally{a({type:Qe})}}),[p,u.account,u.endpoint]),j=(0,s.useCallback)((async()=>{try{c({type:gt,value:!0});const e=await(async e=>{const t=_e("/following","POST",{next:e});try{const e=await qe().request(t);return{status:$e(e.headers),data:e.data}}catch(e){return Ve(e)}})(o.followings.next);d({type:Ot,value:{success:e.status}}),c({type:dt,value:e.data})}catch(e){p(e)}finally{c({type:gt,value:!1})}}),[p,o.followings.next]),C=(0,s.useCallback)((async()=>{!o.locked&&o.followings.hasNext&&await j()}),[o.locked,o.followings.hasNext,j]),Z=(0,s.useCallback)((e=>{c({type:ft,value:e}),a({type:rt,value:!1})}),[]),k=(0,s.useCallback)((async e=>{await f({username:e,history:o.history})}),[f,o.history]),I=(0,s.useCallback)((async()=>{if(!window.confirm("Are you sure to logout?"))return!1;a({type:Ke});try{const e=await(async()=>{const e=_e("/logout","POST",{});try{return(await qe().request(e)).data}catch(e){return Ve(e)}})();return d({type:xt,value:""}),c({type:lt,value:e.media}),!0}catch(e){return p(e,"Logout attempt failed"),!1}finally{a({type:Qe})}}),[p]),R=(0,s.useCallback)((async()=>{window.confirm("Refresh?")&&await f({username:o.user.username,history:o.history,reload:!0})}),[f,o.user.username,o.history]),T=(0,s.useCallback)((async(e,t)=>{a({type:Ke});try{return e?await(async e=>{const t=_e("/follow","POST",{user:e});try{return await qe().request(t)}catch(e){return Ve(e)}})(t):await(async e=>{const t=_e("/unfollow","POST",{user:e});try{return await qe().request(t)}catch(e){return Ve(e)}})(t),c({type:pt,value:{doFollow:e,user:t}}),!0}catch(e){return p(e,"Follow/Unfollow failed"),!1}finally{a({type:Qe})}}),[p]),z=()=>{a({type:tt,value:!0})},L=(0,s.useCallback)((async e=>{await f({username:e.username,history:o.history,preview:!0}),a({type:nt,value:!0})}),[f,o.history]);return(0,s.useEffect)((()=>{f({username:"",history:{}})}),[f]),(0,n.BX)(s.Fragment,{children:[(0,n.tZ)(v,Object.assign({style:{color:"#fff",zIndex:9e3},open:i.isLoading},{children:(0,n.tZ)(E,{})})),i.openSearchModal&&(0,n.tZ)(oe,{open:i.openSearchModal,username:o.user.username,onSubmit:async(e,t)=>{a({type:et,value:!1}),await f({username:e,history:t})},onClose:e=>{c({type:ut,value:e}),a({type:et,value:!1})},onUsernameDelete:x,history:o.history}),i.openLoginModal&&(0,n.tZ)(xe,{open:i.openLoginModal,onClose:()=>{a({type:tt,value:!1})},onSubmit:w,onCodeSubmit:O,requireCode:u.challenge}),i.openAccountModal&&(0,n.tZ)(be,{open:i.openAccountModal,account:u.account,data:o.followings,onUserSelect:k,onClose:Z,height:t,width:e,onRequest:C,onLogout:I,toggleFollow:T,initialScrollTop:o.followingScrollTop}),i.openPreviewModal&&(0,n.tZ)(De,{open:i.openPreviewModal,user:o.previewUser,data:o.previewData,height:t,width:e,margin:45,onClose:()=>{c({type:mt}),a({type:nt,value:!1})},toggleFollow:T,onLastItemRenrered:y}),i.hasError&&(0,n.tZ)(S,Object.assign({style:{zIndex:9e3},childStyle:{width:"100%"},open:i.hasError,autoHideDuration:3e3,onClose:()=>a({type:it})},{children:i.errorMessage})),(0,n.BX)(l,Object.assign({style:{position:"fixed",height:45,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#fff"}},{children:[u.success?(0,n.tZ)(h,Object.assign({size:"small",style:{position:"absolute",left:"5px"},onClick:async()=>{o.isFollowingsReady||await j(),u.success&&a({type:rt,value:!0})}},{children:(0,n.tZ)(Ae.Z,{})})):(0,n.tZ)(h,Object.assign({size:"small",style:{position:"absolute",left:"5px"},onClick:z},{children:(0,n.tZ)(He.Z,{})})),(0,n.tZ)(h,Object.assign({size:"small",style:{position:"absolute",right:"5px"},onClick:R},{children:(0,n.tZ)(Be.Z,{})})),(0,n.tZ)(h,Object.assign({style:{padding:0},type:"button",onClick:()=>{a({type:et,value:!0})}},{children:(0,n.BX)("div",Object.assign({style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"}},{children:[o.user.isPro?(0,n.tZ)(Ue.Z,{sx:{color:"action.active",mr:1,my:.5}}):(0,n.tZ)(Ce.Z,{sx:{color:"action.active",mr:1,my:.5}}),(0,n.tZ)(m,Object.assign({variant:"subtitle1",style:{flexGrow:1,color:"#888"}},{children:o.user.username?o.user.username:"User not found"}))]}))}))]})),(0,n.tZ)(Fe,{ref:r,data:o.data,onIdle:g,onLastItemRenrered:b,onUserTagClick:L,height:t,width:e,margin:45})]})}),{})}),document.getElementById("root"))}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return n[e](r,r.exports,i),r.exports}i.m=n,e=[],i.O=(t,r,n,s)=>{if(!r){var a=1/0;for(u=0;u<e.length;u++){for(var[r,n,s]=e[u],o=!0,l=0;l<r.length;l++)(!1&s||a>=s)&&Object.keys(i.O).every((e=>i.O[e](r[l])))?r.splice(l--,1):(o=!1,s<a&&(a=s));if(o){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[r,n,s]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var s=Object.create(null);i.r(s);var a={};t=t||[null,r({}),r([]),r(r)];for(var o=2&n&&e;"object"==typeof o&&!~t.indexOf(o);o=r(o))Object.getOwnPropertyNames(o).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,i.d(s,a),s},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,r)=>{var n,s,[a,o,l]=r,c=0;if(a.some((t=>0!==e[t]))){for(n in o)i.o(o,n)&&(i.m[n]=o[n]);if(l)var u=l(i)}for(t&&t(r);c<a.length;c++)s=a[c],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(u)},r=self.webpackChunkinsview=self.webpackChunkinsview||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=i.O(void 0,[736],(()=>i(3639)));a=i.O(a)})();