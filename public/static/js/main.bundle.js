(()=>{"use strict";var e,t,r,n={3639:(e,t,r)=>{var n=r(5944),s=r(7294),a=r(3935),i=r(917);const o=(0,i.iv)({transition:"box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",boxShadow:"rgb(0 0 0 / 20%) 0px 2px 4px -1px, rgb(0 0 0 / 14%) 0px 4px 5px 0px, rgb(0 0 0 / 12%) 0px 1px 10px 0px",display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:"0",zIndex:"1100",top:"0px",left:"auto",right:"0px",backgroundColor:"rgb(25, 118, 210)",color:"rgb(255, 255, 255)",position:"relative"}),l=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);return(0,n.tZ)("header",Object.assign({css:o,style:t.style},{children:t.children}))},c=(0,i.iv)({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",backgroundColor:"transparent",outline:"0px",border:"0px",margin:"0px",cursor:"pointer",userSelect:"none",verticalAlign:"middle",appearance:"none",textDecoration:"none",textAlign:"center",flex:"0 0 auto",borderRadius:"50%",overflow:"visible",color:"rgba(0, 0, 0, 0.54)",transition:"background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",WebkitTapHighlightColor:"transparent",fontSize:"1.125rem"}),u=(0,i.iv)({padding:"5px"}),d=(0,i.iv)({padding:"8px"}),p=(0,i.iv)({margin:"0px 0px 0px -12px"}),g=(0,i.iv)({margin:"0px -3px 0px 0px"}),h=e=>{const t=[c];return e.css&&t.push(e.css),"small"===e.size&&t.push(u),"medium"===e.size&&t.push(d),"start"===e.edge&&t.push(p),"end"===e.edge&&t.push(g),(0,n.tZ)("button",Object.assign({css:t,style:e.style,onClick:t=>e.onClick?e.onClick(t):t},{children:e.children}))};const f=(0,i.iv)({margin:"0px",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"400",fontSize:"1rem",lineHeight:"1.75",letterSpacing:"0.00938em"}),b=(0,i.iv)({margin:"0px",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"500",fontSize:"1.25rem",lineHeight:"1.6",letterSpacing:"0.0075em"}),m=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);const r="subtitle1"===t.variant?f:b;return(0,n.tZ)("div",Object.assign({css:r,style:t.style},{children:t.children}))};const y=(0,i.iv)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",inset:"0px",backgroundColor:"rgba(0, 0, 0, 0.5)"}),v=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);const[r,a]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{a(t.open)}),[t.open]),r?(0,n.tZ)("div",Object.assign({css:y,style:t.style},{children:t.children})):null};var x=r(2141),w=r(594);const O=(0,i.iv)({position:"fixed",display:"flex",left:"8px",right:"8px",justifyContent:"center",alignItems:"center",top:"8px","@media(min-width: 600px)":{top:"24px",left:"50%",right:"auto",transform:"translateX(-50%)"}}),j=(0,i.iv)({transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",opacity:0,borderRadius:"4px",boxShadow:"rgb(0 0 0 / 20%) 0px 3px 5px -1px, rgb(0 0 0 / 14%) 0px 6px 10px 0px, rgb(0 0 0 / 12%) 0px 1px 18px 0px",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"500",fontSize:"0.875rem",lineHeight:"1.43",letterSpacing:"0.01071em",backgroundColor:"rgb(211, 47, 47)",display:"flex",padding:"6px 16px",color:"rgb(255, 255, 255)"}),C=(0,i.iv)({marginRight:"12px",padding:"7px 0px",display:"flex",fontSize:"22px",opacity:"0.9"}),k=(0,i.iv)({padding:"8px 0px"}),S=(0,i.iv)({display:"flex",alignItems:"flex-start",padding:"4px 0px 0px 16px",marginLeft:"auto",marginRight:"-8px"}),Z=e=>{const t=(0,s.useRef)(0),r=(0,s.useRef)(0),a=(0,s.useRef)(0),i=(0,s.createRef)(),[o,l]=(0,s.useState)(e.open),c=(0,s.useCallback)((()=>{clearTimeout(r.current),clearTimeout(a.current),a.current=window.setTimeout((()=>{i.current&&(i.current.style.opacity="",i.current.style.transform="scale(0)")}),200)}),[i]),u=(0,s.useCallback)((()=>{clearTimeout(t.current),t.current=window.setTimeout((()=>{i.current&&(i.current.style.opacity="1",i.current.style.transform="none")}),250)}),[i]),d=(0,s.useCallback)((()=>{clearTimeout(r.current),r.current=window.setTimeout((()=>{c()}),e.autoHideDuration)}),[c,e.autoHideDuration]);return(0,s.useEffect)((()=>{l(e.open)}),[e.open]),(0,s.useEffect)((()=>{o&&(u(),d())}),[o,u,d]),(0,s.useEffect)((()=>()=>c()),[c]),o?(0,n.tZ)("div",Object.assign({css:O,style:e.style},{children:(0,n.BX)("div",Object.assign({css:j,style:e.childStyle,ref:i},{children:[(0,n.tZ)("div",Object.assign({css:C},{children:(0,n.tZ)(x.Z,{fontSize:"inherit",color:"inherit"})})),(0,n.tZ)("div",Object.assign({css:k},{children:e.children})),(0,n.tZ)("div",Object.assign({css:S},{children:(0,n.tZ)(h,Object.assign({size:"small",onClick:e.onClose,style:{color:"inherit"}},{children:(0,n.tZ)(w.Z,{fontSize:"small",color:"inherit"})}))}))]}))})):null},I=(0,i.F4)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),R=(0,i.iv)({display:"inline-block",width:"40px",height:"40px",animation:`1.4s linear 0s infinite normal none running ${I}`}),T=(0,i.F4)({"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:0},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}}),z=(0,i.iv)({stroke:"currentcolor",strokeDasharray:"80px, 200px",strokeDashoffset:"0",animation:`1.4s ease-in-out 0s infinite normal none running ${T}`}),E=()=>(0,n.tZ)("span",Object.assign({css:R},{children:(0,n.tZ)("svg",Object.assign({viewBox:"22 22 44 44"},{children:(0,n.tZ)("circle",{css:z,cx:"44",cy:"44",r:"20.2",fill:"none",strokeWidth:"3.6"})}))})),L=(0,i.iv)({position:"fixed",inset:0}),P=(0,i.iv)({display:"flex",alignItems:"center",justifyContent:"center",outline:"0px",height:"100%",opacity:0,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"}),X=(0,i.iv)({backgroundColor:"rgb(255, 255, 255)",color:"rgba(0, 0, 0, 0.87)",transition:"box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",boxShadow:"rgb(0 0 0 / 20%) 0px 11px 15px -7px, rgb(0 0 0 / 14%) 0px 24px 38px 3px, rgb(0 0 0 / 12%) 0px 9px 46px 8px",margin:"0px",position:"relative",overflowY:"auto",display:"flex",flexDirection:"column",maxHeight:"none",maxWidth:"100%",width:"100%",height:"100%",borderRadius:"0px"}),M=e=>{const t=(0,s.useRef)(0),r=(0,s.useRef)(null),[a,i]=(0,s.useState)(e.open),o=(0,s.useCallback)((()=>{r.current&&(r.current.style.opacity="1")}),[]),l=(0,s.useCallback)((()=>{r.current&&(r.current.style.opacity="0.8",clearTimeout(t.current),t.current=window.setTimeout((()=>{r.current&&(r.current.style.opacity="0")}),200))}),[]);return(0,s.useEffect)((()=>{i(e.open)}),[e.open]),(0,s.useEffect)((()=>{a&&o()}),[a,o]),(0,s.useEffect)((()=>()=>l()),[l]),a?(0,n.tZ)("div",Object.assign({css:L,style:e.style},{children:(0,n.tZ)("div",Object.assign({css:P,ref:r},{children:(0,n.tZ)("div",Object.assign({css:X},{children:e.children}))}))})):null};const A=(0,i.iv)({listStyle:"none",margin:0,padding:"8px 0px",position:"relative"}),D=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);return(0,n.tZ)("ul",Object.assign({css:A},{children:t.children}))};const F=(0,i.iv)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",padding:"8px 16px",borderBottom:"1px solid rgba(0, 0, 0, 0.12)",backgroundClip:"padding-box",fontSize:"14px"}),B=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);return(0,n.tZ)("li",Object.assign({css:F,onClick:t.onClick},{children:t.children}))};const H=(0,i.iv)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:"0",width:"40px",height:"40px",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontSize:"1.25rem",lineHeight:"1",borderRadius:"50%",overflow:"hidden",userSelect:"none"}),U=(0,i.iv)({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:"10000px"}),q=(0,i.iv)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:"0",width:"40px",height:"40px",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontSize:"1.25rem",lineHeight:"1",borderRadius:"50%",overflow:"hidden",userSelect:"none",color:"rgb(255, 255, 255)",backgroundColor:"rgb(189, 189, 189)"}),_=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);const[r,a]=(0,s.useState)(!0);return(0,n.tZ)("div",Object.assign({css:H,style:t.style},{children:r?(0,n.tZ)("img",{css:U,src:t.src,alt:t.alt,onError:()=>{a(!1)}}):(0,n.tZ)("div",Object.assign({css:q},{children:(i=t.alt,i?i.charAt(0):"a")}))}));var i},W=(0,s.forwardRef)(((e,t)=>(0,n.tZ)("div",Object.assign({css:N,style:e.style,ref:t},{children:e.children})))),N=(0,i.iv)({flex:"1 1 auto",overflowY:"auto",padding:"20px 24px"}),Y=W;const $=(0,i.iv)({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",backgroundColor:"transparent",outline:"0px",border:"0px",margin:"0px",cursor:"pointer",userSelect:"none",verticalAlign:"middle",appearance:"none",textDecoration:"none",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"500",fontSize:"0.875rem",lineHeight:"1.75",letterSpacing:"0.02857em",textTransform:"uppercase",minWidth:"64px",padding:"6px 8px",borderRadius:"4px",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",color:"rgb(25, 118, 210)"}),G=e=>{var t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,[]);return(0,n.tZ)("button",Object.assign({type:"button",onClick:t.onClick,css:$},{children:t.children}))};var V=r(2961),J=r(2450);const K=(0,i.iv)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:"0px",padding:"0px",margin:"8px 0px 4px",border:"0px",verticalAlign:"top",width:"100%"}),Q=(0,i.iv)({color:"rgba(0, 0, 0, 0.6)",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"400",fontSize:"1rem",lineHeight:"1.4375em",letterSpacing:"0.00938em",padding:"0px",display:"block",transformOrigin:"left top",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"133%",position:"absolute",left:"0px",top:"0px",transform:"translate(0px, -1.5px) scale(0.75)",transition:"color 200ms cubic-bezier(0, 0, 0.2, 1) 0ms, transform 200ms cubic-bezier(0, 0, 0.2, 1) 0ms, max-width 200ms cubic-bezier(0, 0, 0.2, 1) 0ms",".empty &":{maxWidth:"100%",transform:"translate(0px, 20px) scale(1)"},".has-focus &":{color:"rgba(25,118,210)"},".has-error &":{color:"rgb(211, 47, 47)"}}),ee=(0,i.iv)({fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"400",fontSize:"1rem",lineHeight:"1.4375em",letterSpacing:"0.00938em",color:"rgba(0, 0, 0, 0.87)",boxSizing:"border-box",cursor:"text",display:"inline-flex",alignItems:"center",width:"100%",position:"relative",marginTop:"16px","&:before":{borderBottom:"1px solid rgba(0, 0, 0, 0.42)",left:"0px",bottom:"0px",content:'""',position:"absolute",right:"0px",transition:"border-bottom-color 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",pointerEvents:"none"},"&:after":{borderBottom:"2px solid rgb(25, 118, 210)",left:"0px",bottom:"0px",content:'""',position:"absolute",right:"0px",transform:"scaleX(0)",transition:"transform 200ms cubic-bezier(0, 0, 0.2, 1) 0ms",pointerEvents:"none"},".has-focus &:after":{transform:"scaleX(1)"},".has-error &:after":{borderBottomColor:"rgb(211, 47, 47)",transform:"scaleX(1)"}}),te=(0,i.F4)({from:{display:"block"},label:"autoFillCancel"}),re=(0,i.F4)({from:{display:"block"},label:"autoFill"}),ne=(0,i.iv)({font:"inherit",letterSpacing:"inherit",color:"currentcolor",padding:"4px 0px 5px",border:"0px",boxSizing:"content-box",background:"none",height:"1.4375em",margin:"0px",display:"block",minWidth:"0px",width:"100%",WebkitTapHighlightColor:"transparent",animationName:`${te}`,animationDuration:"10ms","&:focus":{outline:"0px"},"&:-webkit-autofill":{animationDuration:"5000s",animationName:`${re}`}}),se=(0,i.iv)({color:"rgba(0, 0, 0, 0.6)",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontWeight:"400",fontSize:"0.75rem",lineHeight:"1.66",letterSpacing:"0.03333em",textAlign:"left",margin:"3px 0px 0px",".has-error &":{color:"rgb(211, 47, 47)"}}),ae=e=>{const t=(0,s.createRef)(),r=e.inputRef?e.inputRef:(0,s.createRef)(),[a,i]=(0,s.useState)(!1),o=(0,s.useCallback)((e=>{var n,s;e||document.activeElement===r.current?null===(n=t.current)||void 0===n||n.classList.remove("empty"):null===(s=t.current)||void 0===s||s.classList.add("empty")}),[t,r]);return(0,s.useEffect)((()=>{var r,n;e.error?null===(r=t.current)||void 0===r||r.classList.add("has-error"):null===(n=t.current)||void 0===n||n.classList.remove("has-error")}),[t,e.error]),(0,s.useEffect)((()=>{o(e.value)}),[t,e.value,o]),(0,n.BX)("div",Object.assign({ref:t,css:K},{children:[(0,n.tZ)("label",Object.assign({css:Q},{children:e.label})),(0,n.BX)("div",Object.assign({css:ee},{children:[(0,n.tZ)("input",{type:e.type,autoComplete:!1===e.autoComplete?"new-password":"on",spellCheck:"false",value:e.value,css:ne,ref:r,onFocus:()=>{var e,r;null===(e=t.current)||void 0===e||e.classList.add("has-focus"),null===(r=t.current)||void 0===r||r.classList.remove("empty")},onBlur:()=>{var e,n,s;null===(e=t.current)||void 0===e||e.classList.remove("has-focus"),(null===(n=r.current)||void 0===n?void 0:n.value)||null===(s=t.current)||void 0===s||s.classList.add("empty")},onChange:t=>{var n;o(null===(n=r.current)||void 0===n?void 0:n.value),e.onChange&&e.onChange(t)},onAnimationStart:e=>{var t;e.animationName.endsWith("autoFillCancel")?o(null===(t=r.current)||void 0===t?void 0:t.value):o("value")}}),"password"===e.type&&(0,n.BX)(h,Object.assign({size:"small",onClick:()=>{r.current&&(i(!a),"password"===r.current.type?r.current.type="text":r.current.type="password")}},{children:[" ",a?(0,n.tZ)(J.Z,{}):(0,n.tZ)(V.Z,{})," "]})),e.endAdornment&&e.endAdornment]})),e.error&&(0,n.tZ)("p",Object.assign({css:se},{children:e.helperText}))]}))};var ie=r(3343),oe=r(1733);const le=e=>{const t=(0,s.createRef)(),r=(0,s.createRef)(),[a,i]=(0,s.useState)(!1),[o,c]=(0,s.useState)(e.username);(0,s.useEffect)((()=>{c(e.username)}),[e.username]);const[u,d]=(0,s.useState)({});(0,s.useEffect)((()=>{d(e.history)}),[e.history]);const p=()=>{e.onClose(u)};return(0,n.BX)(M,Object.assign({style:{zIndex:1300},open:e.open},{children:[(0,n.BX)(l,Object.assign({style:{height:"45px",display:"flex",justifyContent:"center",alignItems:"center"}},{children:[(0,n.tZ)(h,Object.assign({style:{color:"inherit",position:"absolute",left:"5px"},onClick:p},{children:(0,n.tZ)(w.Z,{})})),(0,n.tZ)(m,Object.assign({variant:"h6"},{children:"Search"}))]})),(0,n.BX)(Y,Object.assign({style:{marginTop:"30px"},ref:t},{children:[(0,n.tZ)(ae,{type:"text",error:a,label:"Username",value:o,autoFocus:!0,autoComplete:!1,onChange:e=>{c(e.target.value)},inputRef:r,endAdornment:(0,n.tZ)(h,Object.assign({size:"small",onClick:()=>{var e;c(""),null===(e=r.current)||void 0===e||e.focus()}},{children:(0,n.tZ)(ie.Z,{fontSize:"small"})})),helperText:a?"You should input username":""}),(0,n.BX)("div",Object.assign({style:{display:"flex",justifyContent:"center",marginTop:"30px"}},{children:[(0,n.tZ)(G,Object.assign({onClick:p},{children:"Cancel"})),(0,n.tZ)(G,Object.assign({onClick:()=>{o?(i(!1),e.onSubmit(o,u)):i(!0)}},{children:"Submit"}))]})),(0,n.tZ)("div",Object.assign({style:{marginTop:"30px"}},{children:(0,n.tZ)(D,{children:Object.keys(u).map((r=>{return s=r,e.open?(0,n.tZ)(B,Object.assign({onClick:()=>(c(s),void(t.current&&(t.current.scrollTop=0)))},{children:(0,n.BX)("div",Object.assign({style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"}},{children:[(0,n.tZ)(_,{alt:u[s].username,src:u[s].profileImage,style:{marginRight:"15px"}}),(0,n.BX)("div",Object.assign({style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"}},{children:[(0,n.tZ)("span",{children:u[s].name}),(0,n.tZ)("span",{children:u[s].username})]})),(0,n.tZ)(h,Object.assign({size:"small",edge:"end",onClick:t=>(async(t,r)=>{t.stopPropagation();const n=Object.assign({},u);delete n[r],await e.onUsernameDelete(n,r),d(n)})(t,s)},{children:(0,n.tZ)(oe.Z,{})}))]}))}),s):null;var s}))})}))]}))]}))};var ce=r(7622),ue=r(3540);const de=(0,s.memo)((e=>{const t=e.data.users.length-1,r=(0,s.useRef)(0),a=(0,s.useCallback)((async(t,r)=>{await e.toggleFollow(!r.following,r)}),[e]),i=()=>{e.onClose(r.current)};return(0,n.BX)(M,Object.assign({style:{zIndex:1300,overflowX:"hidden"},open:e.open},{children:[(0,n.BX)(l,Object.assign({style:{height:45,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#fff"}},{children:[(0,n.tZ)(h,Object.assign({size:"small",style:{position:"absolute",left:"5px"},onClick:i},{children:(0,n.tZ)(w.Z,{})})),(0,n.tZ)(m,Object.assign({style:{color:"#888"},variant:"h6"},{children:e.account})),(0,n.tZ)(h,Object.assign({size:"small",style:{position:"absolute",right:"5px"},onClick:async()=>{await e.onLogout()&&i()}},{children:(0,n.tZ)(ue.Z,{})}))]})),(0,n.tZ)(Y,Object.assign({style:{overflow:"hidden",padding:0}},{children:(0,n.tZ)(ce.t7,Object.assign({style:{overflowX:"hidden"},height:e.height-45,itemCount:t,itemSize:60,width:e.width,itemData:e.data.users,onScroll:({scrollOffset:e})=>{r.current=e},initialScrollOffset:e.initialScrollTop,onItemsRendered:({visibleStopIndex:r})=>{r===t-1&&e.data.next&&e.onRequest()}},{children:({index:t,data:r,style:s})=>(0,n.BX)("div",Object.assign({css:pe,style:s},{children:[(0,n.tZ)(_,{alt:r[t].profileImage,src:r[t].profileImage,style:{marginRight:"15px",marginLeft:"24px"}}),(0,n.BX)("div",Object.assign({css:ge,onClick:()=>{return n=r[t].username,i(),void e.onUserSelect(n);var n}},{children:[(0,n.tZ)("div",Object.assign({css:he},{children:r[t].name})),(0,n.tZ)("div",Object.assign({css:he},{children:r[t].username}))]})),r[t].following?(0,n.tZ)("button",Object.assign({css:fe,onClick:e=>a(e,r[t])},{children:"Unfollow"})):(0,n.tZ)("button",Object.assign({css:be,onClick:e=>a(e,r[t])},{children:"Follow"}))]}))}))}))]}))})),pe=(0,i.iv)({display:"flex",alignItems:"center",flex:1}),ge=(0,i.iv)({display:"flex",flexDirection:"column",flex:"1 1 auto"}),he=(0,i.iv)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"14px",width:"200px"}),fe=(0,i.iv)({padding:"5px 9px",borderRadius:"4px",fontSize:"14px",backgroundColor:"rgb(255, 255, 255)",color:"rgb(0, 0, 0)",border:"1px solid #ccc",marginRight:"20px"}),be=(0,i.iv)({padding:"5px 9px",borderRadius:"4px",fontSize:"14px",backgroundColor:"rgb(25, 118, 210)",color:"rgb(255, 255, 255)",border:"1px solid #ccc",marginRight:"20px"}),me=de;var ye=r(8557),ve=r(5671);const xe="You should input username/password",we=e=>{const[t,r]=(0,s.useState)(!1),[a,i]=(0,s.useState)(!1),[o,c]=(0,s.useState)(e.requireCode),[u,d]=(0,s.useState)(""),[p,g]=(0,s.useState)(""),[f,b]=(0,s.useState)("");return(0,s.useEffect)((()=>{c(e.requireCode)}),[e.requireCode]),(0,n.BX)(M,Object.assign({style:{zIndex:1300},open:e.open},{children:[(0,n.BX)(l,Object.assign({style:{height:"45px",display:"flex",justifyContent:"center",alignItems:"center"}},{children:[(0,n.tZ)(h,Object.assign({style:{color:"inherit",position:"absolute",left:"5px"},onClick:e.onClose},{children:(0,n.tZ)(w.Z,{})})),(0,n.tZ)(m,Object.assign({variant:"h6"},{children:"Authenticate"})),(0,n.tZ)(h,Object.assign({style:{color:"inherit",position:"absolute",right:"5px"},onClick:()=>{c(!o)}},{children:o?(0,n.tZ)(ye.Z,{}):(0,n.tZ)(ve.Z,{})}))]})),(0,n.tZ)(Y,Object.assign({style:{marginTop:"30px"}},{children:o?(0,n.BX)("div",{children:[(0,n.tZ)(ae,{type:"number",error:t,label:"Code",value:f,autoFocus:!0,autoComplete:!1,onChange:e=>{b(e.target.value)},helperText:a?"You should input code":""}),(0,n.tZ)("div",Object.assign({style:{display:"flex",justifyContent:"center",marginTop:"30px"}},{children:(0,n.tZ)(G,Object.assign({onClick:()=>{f?(i(!1),e.onCodeSubmit(f)):i(!0)}},{children:"Verify"}))}))]}):(0,n.BX)("div",{children:[(0,n.tZ)(ae,{type:"text",error:t,label:"Username",value:u,autoFocus:!0,autoComplete:!0,onChange:e=>{d(e.target.value)},helperText:t?xe:""}),(0,n.tZ)(ae,{type:"password",error:t,label:"Password",value:p,autoFocus:!0,autoComplete:!0,onChange:e=>{g(e.target.value)},helperText:t?xe:""}),(0,n.BX)("div",Object.assign({style:{display:"flex",justifyContent:"center",marginTop:"30px"}},{children:[(0,n.tZ)(G,Object.assign({onClick:e.onClose},{children:"Cancel"})),(0,n.tZ)(G,Object.assign({onClick:()=>{u&&p?(r(!1),e.onSubmit(u,p)):r(!0)}},{children:"Login"}))]}))]})}))]}))};var Oe=r(6111),je=r(1811),Ce=r(4833),ke=r(8201),Se=r(6043);const Ze={startX:0,startY:0,startTime:0,moveY:0,moveX:0,isMoved:!1,swiping:!1,close:!1,direction:"",left:0,degree:0},Ie="right",Re="left",Te=(0,i.iv)({display:"flex",justifyContent:"flex-start",alignItems:"center"}),ze=(0,i.iv)({maxHeight:"100%",maxWidth:"100%",transition:"transform 0.7s",willChange:"transform"}),Ee=(0,i.iv)({maxHeight:"100%",width:"100%"}),Le=(0,i.iv)({position:"fixed",top:0,left:0,overflow:"hidden",backgroundColor:"#2a2727d4",zIndex:2e3,height:"100%",width:"100%",userSelect:"none"}),Pe=(0,i.iv)({position:"absolute",margin:0,padding:0,opacity:0,bottom:"3em",left:"10px",zIndex:2e3,width:"100%",height:"100%x",display:"flex",justifyContent:"flex-start",alignItems:"self-start",flexDirection:"column",transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","& div":{letterSpacing:"0.02857em",margin:"5px 5px 5px 0px",padding:"5px",color:"#fff",borderRadius:"5px",backgroundColor:"rgb(25, 118, 210)"},".tags &":{opacity:1}}),Xe=(0,i.iv)({position:"fixed",bottom:"5px",left:"5px",display:"none",".has-tags + &":{display:"inline-flex"}}),Me=(0,s.memo)((e=>{const t=(0,s.useRef)(Object.assign({},Ze)),r=(0,s.useRef)(null),a=(0,s.useRef)(!1),i=(0,s.useRef)(!1),o=(0,s.useRef)(0),l=(0,s.useRef)(0),c=(0,s.useRef)(null),u=(0,s.useRef)(null),d=(0,s.useRef)(null),p=()=>t.current.direction===Ie||t.current.direction===Re,g=(0,s.useCallback)((e=>{var r,n,s;t.current.startX=e.touches[0].clientX+(null===(r=u.current)||void 0===r?void 0:r.scrollLeft),t.current.startY=e.touches[0].clientY,t.current.startTime=(new Date).getTime(),t.current.swiping=!0,t.current.left=null!==(s=null===(n=u.current)||void 0===n?void 0:n.scrollLeft)&&void 0!==s?s:0,"VIDEO"===e.target.tagName?d.current=e.target:d.current=null}),[]),f=(0,s.useCallback)((()=>{t.current=Object.assign({},Ze)}),[]),b=(0,s.useCallback)((()=>{f(),e.onClose()}),[f,e]),m=(0,s.useCallback)((()=>{var r;t.current.isMoved&&(new Date).getTime()-t.current.startTime<=150||t.current.degree>.6?(l.current=t.current.direction===Re?t.current.left+e.width:t.current.left-e.width,null===(r=u.current)||void 0===r||r.scrollTo({left:l.current,behavior:"smooth"})):(l.current=t.current.left,u.current&&(u.current.scrollLeft=l.current)),setTimeout((()=>{u.current&&u.current.scrollLeft!==l.current&&(u.current.scrollLeft=l.current)}),150),f()}),[f,e.width]),y=(0,s.useCallback)((()=>{t.current.close||t.current.isMoved&&(new Date).getTime()-t.current.startTime<=150||t.current.degree>.3?b():(f(),u.current&&(u.current.style.transform="translate(0px, 0px)"))}),[b,f]),v=(0,s.useCallback)((()=>{t.current.swiping&&(p()?m():y())}),[y,m]),x=(0,s.useCallback)((()=>{var r;const n=(t.current.moveX-t.current.left)/e.width;t.current.degree=Math.abs(n),t.current.isMoved=t.current.degree>0,null===(r=u.current)||void 0===r||r.scrollTo({left:t.current.moveX}),t.current.degree>.6&&m()}),[m,e.width]),w=(0,s.useCallback)((()=>{t.current.degree=Math.abs(t.current.moveY)/e.height,t.current.isMoved=t.current.degree>0,t.current.degree>.3&&(t.current.close=!0),u.current&&(u.current.style.transform=`translate(0px, ${-t.current.moveY}px)`)}),[e.height]),O=(0,s.useCallback)((e=>{if(!t.current.swiping||i.current)return;S(),Z();const r=t.current.startX-e.touches[0].clientX,n=t.current.startY-e.touches[0].clientY;t.current.direction||(t.current.direction=((e,t)=>Math.abs(e)>Math.abs(t)?e>0?Re:Ie:t>0?"up":"down")(r-t.current.left,n)),t.current.moveY=n,t.current.moveX=r,p()?x():w()}),[x,w]),j=(0,s.useCallback)((e=>{if(!u.current)return;const t=e.currentTarget;if(r.current=t.getBoundingClientRect(),i.current)f(),t.style.transform="scale(1)",i.current=!1;else{const n=e.pageX-r.current.left;let s=e.pageY-r.current.top;const a=r.current.top-2*s,o=r.current.top+3*r.current.height-2*s;a>0?s=r.current.top/2:o<window.screen.height&&(s=r.current.height-r.current.top/2),t.style.transformOrigin=`${n}px ${s}px`,t.style.transform="scale(3)",i.current=!0}}),[f]),C=(0,s.useCallback)((e=>{if(!a.current)return a.current=!0,void(o.current=window.setTimeout((()=>{a.current=!1}),300));clearTimeout(o.current),a.current=!1,Z(),j(e)}),[j]),k=(0,s.useCallback)((e=>{"Escape"===e.key&&b()}),[b]),S=()=>{d.current&&d.current.pause()},Z=()=>{u.current&&u.current.classList.contains("tags")&&u.current.classList.remove("tags")};return(0,s.useEffect)((()=>{var e,t,r;return document.body.style.overflow="hidden",null===(e=u.current)||void 0===e||e.addEventListener("touchstart",g,{passive:!0}),null===(t=u.current)||void 0===t||t.addEventListener("touchmove",O,{passive:!0}),null===(r=u.current)||void 0===r||r.addEventListener("touchend",v,{passive:!0}),document.addEventListener("keydown",k),()=>{document.removeEventListener("keydown",k)}}),[g,O,v,k]),(0,s.useEffect)((()=>()=>{document.body.style.overflow=""}),[]),(0,n.BX)("div",Object.assign({css:Le,ref:c},{children:[(0,n.tZ)(ce.t7,Object.assign({height:e.height,itemCount:e.data.length,itemSize:e.width,width:e.width,layout:"horizontal",overscanCount:4,outerRef:u,itemData:e.data,initialScrollOffset:e.width*(1*e.startIndex),style:{overflow:"hidden",background:"#121111",WebkitTransform:"translateZ(0px)"},onItemsRendered:({visibleStartIndex:r})=>{t.current.swiping||(e.onImageRendered(r),u.current&&(e.data[r].taggedUsers.length>0?u.current.classList.add("has-tags"):u.current.classList.remove("has-tags")))}},{children:({index:t,style:r})=>{const s=e.data[t].taggedUsers?e.data[t].taggedUsers:[];return(0,n.BX)("div",Object.assign({style:r,css:Te},{children:[(0,n.tZ)("div",Object.assign({css:Pe},{children:s.map((t=>(0,n.tZ)("div",Object.assign({onClick:()=>(t=>{e.onUserTagClick(t)})(t)},{children:t.username}),t.id)))})),e.data[t].isVideo&&(0,n.tZ)("div",Object.assign({style:{position:"absolute",width:"100%",top:"5px"}},{children:(0,n.tZ)("a",Object.assign({href:`/video?url=${encodeURIComponent(e.data[t].media_url)}&id=${e.data[t].id}`,download:!0,style:{color:"#ccc",width:"100%",height:"100%",display:"flex",justifyContent:"flex-end"}},{children:(0,n.tZ)(Se.Z,{color:"inherit",style:{marginRight:"5px"}})}))})),e.data[t].isVideo?(0,n.tZ)("video",{css:Ee,src:e.data[t].media_url,controls:!0,muted:!0,playsInline:!0,preload:"none",poster:e.data[t].thumbnail_url}):(0,n.tZ)("img",{css:ze,alt:e.data[t].id,src:e.data[t].media_url,onClick:C})]}))}})),(0,n.tZ)("span",Object.assign({css:Xe},{children:(0,n.tZ)(h,Object.assign({onClick:()=>{u.current&&(u.current.classList.contains("tags")?Z():u.current.classList.add("tags"))}},{children:(0,n.tZ)(ke.Z,{sx:{color:"rgb(135 129 129)",mr:1,my:.5}})}))}))]}))})),Ae=(0,s.forwardRef)(((e,t)=>{const r=e.width/3,a=Math.ceil(e.data.length/3),o=(0,s.createRef)(),l=(0,s.useRef)(0),c=(0,s.useRef)(0),u=(0,s.useRef)(0),[d,p]=(0,s.useState)(!1);(0,s.useImperativeHandle)(t,(()=>({scrollTo:e=>{var t;null===(t=o.current)||void 0===t||t.scrollToItem({align:"start",columnIndex:0,rowIndex:e})}})));const g=(0,s.useCallback)((()=>{a<=0||(l.current===c.current?e.onIdle&&e.onIdle(l.current):c.current=l.current)}),[e,a]);(0,s.useEffect)((()=>{const e=setInterval(g,1e4);return()=>clearInterval(e)}),[g]);const h=(0,i.iv)({display:"flex",justifyContent:"center",alignItems:"center",flex:1,marginTop:`${e.margin}px`,overflowY:"auto",overflowX:"hidden"}),f=(0,i.iv)({height:"100%",left:0,position:"absolute",top:0,width:"100%",objectFit:"cover"});return(0,n.BX)(s.Fragment,{children:[d&&(0,n.tZ)(Me,{width:e.width,height:e.height,onClose:()=>{p(!1)},data:e.data,startIndex:u.current,onImageRendered:e=>{var t;null===(t=o.current)||void 0===t||t.scrollToItem({rowIndex:Math.floor(e/3)})},onUserTagClick:t=>{e.onUserTagClick&&e.onUserTagClick(t)}}),(0,n.tZ)("div",Object.assign({css:h},{children:(0,n.tZ)(ce.Ym,Object.assign({ref:o,columnCount:3,columnWidth:r,height:e.height-e.margin,rowCount:a,rowHeight:r,width:e.width,itemData:e.data,overscanRowCount:0,onItemsRendered:({visibleRowStartIndex:t,visibleRowStopIndex:r})=>{r===a-1&&e.onLastItemRenrered&&e.onLastItemRenrered(),l.current=t}},{children:({columnIndex:e,data:t,rowIndex:r,style:s})=>{const a=e+3*r;return(0,n.BX)("div",Object.assign({style:s},{children:[t[a]?(0,n.tZ)("img",{css:f,alt:t[a].id,src:t[a].thumbnail_url?t[a].thumbnail_url:t[a].media_url,onClick:()=>(e=>{u.current=e,p(!0)})(a)}):(0,n.tZ)("div",{}),t[a]&&t[a].isVideo&&(0,n.tZ)(Ce.Z,{fontSize:"small",style:{position:"absolute",right:"5px",color:"rgba(255,255,255)"}})]}))}}))}))]})})),De=(0,s.memo)(Ae),Fe=e=>(0,n.BX)(M,Object.assign({style:{zIndex:3e3},open:e.open},{children:[(0,n.BX)(l,Object.assign({style:{position:"fixed",height:e.margin,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgb(33 86 139)"}},{children:[(0,n.tZ)(h,Object.assign({style:{color:"inherit",position:"absolute",left:"5px"},onClick:e.onClose},{children:(0,n.tZ)(w.Z,{})})),(0,n.tZ)(m,Object.assign({variant:"subtitle1"},{children:e.user.username})),(0,n.tZ)(h,Object.assign({style:{color:"inherit",position:"absolute",right:"5px"},onClick:async()=>{const t=!e.user.following;await e.toggleFollow(t,e.user)}},{children:e.user.following?(0,n.tZ)(Oe.Z,{}):(0,n.tZ)(je.Z,{})}))]})),(0,n.tZ)(De,{data:e.data,height:e.height,width:e.width,margin:e.margin,onLastItemRenrered:e.onLastItemRenrered})]}));var Be=r(666),He=r(4020),Ue=r(9485),qe=r(6040),_e=r(9669),We=r.n(_e);Error;class Ne extends Error{constructor(e,t){super(e),this.name="RequestError",this.data=t,Object.setPrototypeOf(this,Ne.prototype)}}const Ye={id:"",igId:"",isPro:!1,username:"",name:"",profileImage:"",biography:"",following:!1},$e={username:"",media:[],user:Ye,rowIndex:0,next:"",history:{},isAuthenticated:!1},Ge=(e,t,r)=>({method:t,url:e,headers:{"Content-Type":"application/json"},data:r,withCredentials:!0}),Ve=e=>"true"===e["ig-auth"],Je=e=>{throw new Ne(e.response.data,{igAuth:"true"===e.response.headers["ig-auth"]})},Ke=async(e,t,r)=>{const n=Ge("/querymore","POST",{user:e,next:t,preview:r});try{const e=await We().request(n);return{status:Ve(e.headers),data:e.data}}catch(e){return Je(e)}},Qe={isLoading:!1,openSearchModal:!1,openImageModal:!1,openLoginModal:!1,openAccountModal:!1,openPreviewModal:!1,hasError:!1,errorMessage:""},et="start",tt="end",rt="toggleSearchModal",nt="toggleLoginModal",st="toggleAccountModal",at="togglePreviewModal",it="showError",ot="hideError",lt=(e,t)=>{switch(t.type){case et:return Object.assign(Object.assign({},e),{isLoading:!0});case tt:return Object.assign(Object.assign({},e),{isLoading:!1});case rt:return Object.assign(Object.assign({},e),{openSearchModal:t.value});case"toggleImageModal":return Object.assign(Object.assign({},e),{openImageModal:t.value});case nt:return Object.assign(Object.assign({},e),{openLoginModal:t.value});case st:return Object.assign(Object.assign({},e),{openAccountModal:t.value});case at:return Object.assign(Object.assign({},e),{openPreviewModal:t.value});case it:return Object.assign(Object.assign({},e),{hasError:!0,errorMessage:t.value});case ot:return Object.assign(Object.assign({},e),{hasError:!1,errorMessage:""});default:return e}},ct={locked:!1,next:"",user:Ye,data:[],previewNext:"",previewUser:Ye,previewData:[],history:{},isFollowingsReady:!1,followings:{users:[],hasNext:!1,next:""},mediaScrollTop:0,followingScrollTop:0},ut="update",dt="append",pt="history",gt="followings",ht="updateFollowStatus",ft="toggleLock",bt="mediaScrollTop",mt="followingScrollTop",yt="preview",vt="resetPreview",xt=(e,t)=>{switch(t.type){case"reset":{const r=ct;return r.user.username=t.value,Object.assign(Object.assign({},e),r)}case ut:return Object.assign(Object.assign({},e),{user:t.value.user,data:t.value.media,next:t.value.next,history:t.value.history,mediaScrollTop:t.value.rowIndex});case dt:return Object.assign(Object.assign({},e),{data:e.data.concat(t.value.media),next:t.value.next,mediaScrollTop:t.value.rowIndex});case pt:return Object.assign(Object.assign({},e),{history:t.value});case bt:return Object.assign(Object.assign({},e),{mediaScrollTop:t.value});case mt:return Object.assign(Object.assign({},e),{followingScrollTop:t.value});case ft:return Object.assign(Object.assign({},e),{locked:t.value});case gt:{let r;r=e.followings.users.length>0?e.followings.users.concat(t.value.users):t.value.users;const n={users:r,hasNext:t.value.hasNext,next:t.value.next};return Object.assign(Object.assign({},e),{isFollowingsReady:!0,followings:n})}case ht:{if(e.previewUser.username===t.value.user.username)return Object.assign(Object.assign({},e),{isFollowingsReady:!1,previewUser:Object.assign(Object.assign({},e.previewUser),{following:t.value.doFollow})});const r=e.followings.users.map((e=>(e.username===t.value.user.username&&(e.following=t.value.doFollow),e)));return Object.assign(Object.assign({},e),{followings:Object.assign(Object.assign({},e.followings),{users:r})})}case vt:return Object.assign(Object.assign({},e),{previewData:[],previewNext:"",previewUser:Ye});case yt:return e.previewUser.username===t.value.user.username?Object.assign(Object.assign({},e),{previewData:e.previewData.concat(t.value.media),previewNext:t.value.next}):Object.assign(Object.assign({},e),{previewUser:t.value.user,previewData:t.value.media,previewNext:t.value.next});default:return e}},wt={account:"",success:!1,challenge:!1,endpoint:""},Ot="init",jt="update",Ct="toggleAuth",kt=(e,t)=>{switch(t.type){case Ot:{const r=wt;return r.account=t.value,Object.assign(Object.assign({},e),r)}case jt:return Object.assign(Object.assign({},e),t.value);case Ct:return t.value.account?Object.assign(Object.assign({},e),{success:t.value.success,account:t.value.account}):Object.assign(Object.assign({},e),{success:t.value.success});default:return e}};a.render((0,n.tZ)(s.StrictMode,{children:(0,n.tZ)((function(){const{width:e,height:t}=(()=>{const e=()=>{const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}},[t,r]=(0,s.useState)(e());return(0,s.useEffect)((()=>{const t=()=>{r(e())};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[]),t})(),r=(0,s.useRef)({}),[a,i]=(0,s.useReducer)(lt,Qe),[o,c]=(0,s.useReducer)(xt,ct),[u,d]=(0,s.useReducer)(kt,wt),p=(0,s.useCallback)((async(e,t="")=>{if(d({type:Ct,value:{success:e.data.igAuth}}),!e.data.igAuth)return z();i(t?{type:it,value:t}:{type:it,value:e.message})}),[]),g=(0,s.useCallback)((async e=>{o.mediaScrollTop!==e&&(await(async(e,t)=>{const r=Ge("/save","POST",{username:e,rowIndex:t});try{await We().request(r)}catch(e){return Je(e)}})(o.user.username,e),c({type:bt,value:e}))}),[o.mediaScrollTop,o.user.username]),f=(0,s.useCallback)((async({username:e,history:t,reload:n=!1,preview:s=!1})=>{var a;i({type:et});try{const o=await(async(e,t,r,n)=>{const s=Ge("/query","POST",{username:e,history:t,reload:r,preview:n});try{const e=await We().request(s);return{status:Ve(e.headers),data:e.data}}catch(e){return Je(e)}})(e,t,n,s);d({type:Ct,value:{success:o.status,account:o.data.account}}),s?c({type:yt,value:o.data}):(c({type:ut,value:o.data}),null===(a=r.current)||void 0===a||a.scrollTo(o.data.rowIndex))}catch(e){p(e)}finally{i({type:tt})}}),[p]),b=(0,s.useCallback)((async()=>{if(!o.locked&&o.next)try{c({type:ft,value:!0});const e=await Ke(o.user,o.next,!1);d({type:Ct,value:{success:e.status}}),c({type:dt,value:e.data})}catch(e){p(e)}finally{setTimeout((()=>{c({type:ft,value:!1})}),3e3)}}),[p,o.locked,o.next,o.user]),y=(0,s.useCallback)((async()=>{if(!o.locked&&o.previewNext)try{c({type:ft,value:!0});const e=await Ke(o.previewUser,o.previewNext,!0);d({type:Ct,value:{success:e.status}}),c({type:yt,value:e.data})}catch(e){p(e)}finally{c({type:ft,value:!1})}}),[p,o.locked,o.previewUser,o.previewNext]),x=(0,s.useCallback)((async(e,t)=>{i({type:et});try{await(async(e,t,r)=>{const n=Ge("/remove","POST",{history:e,current:t,target:r});try{await We().request(n)}catch(e){return Je(e)}})(e,o.user.username,t)}catch(e){p(e,"Update history failed")}finally{i({type:tt})}}),[p,o.user.username]),w=(0,s.useCallback)((async(e,t)=>{i({type:et});try{d({type:Ot,value:e});const r=await(async(e,t)=>{console.log("---------- login start ----------");const r={isAuthenticated:!1,csrfToken:"",userId:"",userAgent:navigator.userAgent,cookies:[],expires:null,xHeaders:{appId:"",ajax:""}},n="https://www.instagram.com",s={Accept:"*/*","Accept-Encoding":"gzip, deflate","Accept-Language":"en-US",Authority:"www.instagram.com",origin:"https://www.instagram.com"};s.referer=n,s["x-requested-with"]="XMLHttpRequest",s["x-csrftoken"]=r.csrfToken,s["user-agent"]=r.userAgent;const a=e=>e.match(/"client_revision":(.*),"tier"/)[1];let i=[];try{const l={};s.Cookie="ig_cb=1;",s["x-instagram-ajax"]=1,l.url=n,l.method="GET",l.headers=s;let c=await We().request(l);const u={appId:(o=c.data,o.match(/"customHeaders":{"X-IG-App-ID":"(.*)","X-IG-D"/)[1]),ajax:a(c.data)};c.headers["set-cookie"]&&(i=c.headers["set-cookie"].map((e=>e.substring(1,e.indexOf(";"))))),s["x-ig-app-id"]=u.appId,s.Cookie=i.join(";"),l.url="https://www.instagram.com/api/v1/public/landing_info/",l.method="GET",l.headers=s,l.withCredentials=!0,c=await We().request(l),c.headers["set-cookie"]&&(i=c.headers["set-cookie"].map((e=>e.substring(1,e.indexOf(";")))).filter((e=>!i.includes(e)))),s.Cookie=i.join(";"),s["x-ig-www-claim"]=0,s["x-instagram-ajax"]=u.ajax,s["x-csrftoken"]=r.csrfToken,s["content-type"]="application/x-www-form-urlencoded";const d=e=>`#PWD_INSTAGRAM_BROWSER:0:${Math.floor(Date.now()/1e3)}:${e}`,p=new URLSearchParams;return p.append("enc_password",d(t)),p.append("username",e),p.append("queryParams","{}"),p.append("optIntoOneTap","false"),p.append("trustedDeviceRecords","{}"),l.url="https://www.instagram.com/api/v1/web/accounts/login/ajax/",l.method="POST",l.data=p,l.headers=s,c=await We().request(l),console.log("----------auth response-------"),console.log(c.data),{status:{account:e,success:r.isAuthenticated,challenge:!1,endpoint:""},media:$e}}catch(e){return e.response&&e.response.data.message&&"checkpoint_required"===e.response.data.message&&console.log(e.response.data),(e=>{if(e.response&&e.response.headers["content-type"].includes("html"))return!1;const t=e.response?e.response.data:e;console.log(t),console.log(t.message),e.response&&e.response.data})(e),Je(e)}var o})(e,t);d({type:jt,value:r.status}),r.status.challenge||(c({type:ut,value:r.media}),i({type:nt,value:!r.status.success}))}catch(e){p(e,"Login attempt failed")}finally{i({type:tt})}}),[p]),O=(0,s.useCallback)((async e=>{i({type:et});try{const t=await(async(e,t,r)=>{const n=Ge("/challenge","POST",{account:e,code:t,endpoint:r});try{return(await We().request(n)).data}catch(e){return Je(e)}})(u.account,e,u.endpoint);d({type:jt,value:t.status}),t.status.challenge||(c({type:ut,value:t.media}),i({type:nt,value:!t.status.success}))}catch(e){i({type:it,value:"Verification failed"})}finally{i({type:tt})}}),[u.account,u.endpoint]),j=(0,s.useCallback)((async()=>{try{c({type:ft,value:!0});const e=await(async e=>{const t=Ge("/following","POST",{next:e});try{const e=await We().request(t);return{status:Ve(e.headers),data:e.data}}catch(e){return Je(e)}})(o.followings.next);d({type:Ct,value:{success:e.status}}),c({type:gt,value:e.data}),i({type:st,value:!0})}catch(e){p(e)}finally{c({type:ft,value:!1})}}),[p,o.followings.next]),C=(0,s.useCallback)((async()=>{!o.locked&&o.followings.hasNext&&await j()}),[o.locked,o.followings.hasNext,j]),k=(0,s.useCallback)((e=>{c({type:mt,value:e}),i({type:st,value:!1})}),[]),S=(0,s.useCallback)((async e=>{await f({username:e,history:o.history})}),[f,o.history]),I=(0,s.useCallback)((async()=>{if(!window.confirm("Are you sure to logout?"))return!1;i({type:et});try{const e=await(async()=>{const e=Ge("/logout","POST",{});try{return(await We().request(e)).data}catch(e){return Je(e)}})();return d({type:Ot,value:""}),c({type:ut,value:e.media}),!0}catch(e){return p(e,"Logout attempt failed"),!1}finally{i({type:tt})}}),[p]),R=(0,s.useCallback)((async()=>{window.confirm("Refresh?")&&await f({username:o.user.username,history:o.history,reload:!0})}),[f,o.user.username,o.history]),T=(0,s.useCallback)((async(e,t)=>{i({type:et});try{return e?await(async e=>{const t=Ge("/follow","POST",{user:e});try{return await We().request(t)}catch(e){return Je(e)}})(t):await(async e=>{const t=Ge("/unfollow","POST",{user:e});try{return await We().request(t)}catch(e){return Je(e)}})(t),c({type:ht,value:{doFollow:e,user:t}}),!0}catch(e){return p(e,"Follow/Unfollow failed"),!1}finally{i({type:tt})}}),[p]),z=()=>{i({type:nt,value:!0})},L=(0,s.useCallback)((async e=>{await f({username:e.username,history:o.history,preview:!0}),i({type:at,value:!0})}),[f,o.history]);return(0,s.useEffect)((()=>{f({username:"",history:{}})}),[f]),(0,n.BX)(s.Fragment,{children:[(0,n.tZ)(v,Object.assign({style:{color:"#fff",zIndex:9e3},open:a.isLoading},{children:(0,n.tZ)(E,{})})),a.openSearchModal&&(0,n.tZ)(le,{open:a.openSearchModal,username:o.user.username,onSubmit:async(e,t)=>{i({type:rt,value:!1}),await f({username:e,history:t})},onClose:e=>{c({type:pt,value:e}),i({type:rt,value:!1})},onUsernameDelete:x,history:o.history}),a.openLoginModal&&(0,n.tZ)(we,{open:a.openLoginModal,onClose:()=>{i({type:nt,value:!1})},onSubmit:w,onCodeSubmit:O,requireCode:u.challenge}),a.openAccountModal&&(0,n.tZ)(me,{open:a.openAccountModal,account:u.account,data:o.followings,onUserSelect:S,onClose:k,height:t,width:e,onRequest:C,onLogout:I,toggleFollow:T,initialScrollTop:o.followingScrollTop}),a.openPreviewModal&&(0,n.tZ)(Fe,{open:a.openPreviewModal,user:o.previewUser,data:o.previewData,height:t,width:e,margin:45,onClose:()=>{c({type:vt}),i({type:at,value:!1})},toggleFollow:T,onLastItemRenrered:y}),a.hasError&&(0,n.tZ)(Z,Object.assign({style:{zIndex:9e3},childStyle:{width:"100%"},open:a.hasError,autoHideDuration:3e3,onClose:()=>i({type:ot})},{children:a.errorMessage})),(0,n.BX)(l,Object.assign({style:{position:"fixed",height:45,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#fff"}},{children:[u.success?(0,n.tZ)(h,Object.assign({size:"small",style:{position:"absolute",left:"5px"},onClick:async()=>{o.isFollowingsReady?u.success&&i({type:st,value:!0}):await j()}},{children:(0,n.tZ)(He.Z,{})})):(0,n.tZ)(h,Object.assign({size:"small",style:{position:"absolute",left:"5px"},onClick:z},{children:(0,n.tZ)(Ue.Z,{})})),(0,n.tZ)(h,Object.assign({size:"small",style:{position:"absolute",right:"5px"},onClick:R},{children:(0,n.tZ)(Be.Z,{})})),(0,n.tZ)(h,Object.assign({style:{padding:0},type:"button",onClick:()=>{i({type:rt,value:!0})}},{children:(0,n.BX)("div",Object.assign({style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"}},{children:[o.user.isPro?(0,n.tZ)(qe.Z,{sx:{color:"action.active",mr:1,my:.5}}):(0,n.tZ)(ke.Z,{sx:{color:"action.active",mr:1,my:.5}}),(0,n.tZ)(m,Object.assign({variant:"subtitle1",style:{flexGrow:1,color:"#888"}},{children:o.user.username?o.user.username:"User not found"}))]}))}))]})),(0,n.tZ)(De,{ref:r,data:o.data,onIdle:g,onLastItemRenrered:b,onUserTagClick:L,height:t,width:e,margin:45})]})}),{})}),document.getElementById("root"))}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return n[e](r,r.exports,a),r.exports}a.m=n,e=[],a.O=(t,r,n,s)=>{if(!r){var i=1/0;for(u=0;u<e.length;u++){for(var[r,n,s]=e[u],o=!0,l=0;l<r.length;l++)(!1&s||i>=s)&&Object.keys(a.O).every((e=>a.O[e](r[l])))?r.splice(l--,1):(o=!1,s<i&&(i=s));if(o){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[r,n,s]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var s=Object.create(null);a.r(s);var i={};t=t||[null,r({}),r([]),r(r)];for(var o=2&n&&e;"object"==typeof o&&!~t.indexOf(o);o=r(o))Object.getOwnPropertyNames(o).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,a.d(s,i),s},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};a.O.j=t=>0===e[t];var t=(t,r)=>{var n,s,[i,o,l]=r,c=0;if(i.some((t=>0!==e[t]))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(l)var u=l(a)}for(t&&t(r);c<i.length;c++)s=i[c],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(u)},r=self.webpackChunkinsview=self.webpackChunkinsview||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var i=a.O(void 0,[736],(()=>a(3639)));i=a.O(i)})();